function cov_4f45j9k2i(){var path="/vagrant/continuum/core/src/modules/index.js";var hash="2aa9dc9c7e8cf2c51a271a0a9a749dd3d0359075";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/modules/index.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:24}},"1":{start:{line:2,column:16},end:{line:2,column:34}},"2":{start:{line:3,column:21},end:{line:3,column:47}},"3":{start:{line:4,column:40},end:{line:4,column:51}},"4":{start:{line:6,column:15},end:{line:33,column:1}},"5":{start:{line:35,column:15},end:{line:35,column:31}},"6":{start:{line:36,column:17},end:{line:36,column:26}},"7":{start:{line:37,column:0},end:{line:66,column:2}},"8":{start:{line:38,column:2},end:{line:64,column:5}},"9":{start:{line:39,column:20},end:{line:39,column:44}},"10":{start:{line:40,column:4},end:{line:63,column:5}},"11":{start:{line:41,column:6},end:{line:62,column:7}},"12":{start:{line:42,column:26},end:{line:42,column:56}},"13":{start:{line:43,column:8},end:{line:47,column:22}},"14":{start:{line:44,column:41},end:{line:44,column:74}},"15":{start:{line:45,column:10},end:{line:45,column:55}},"16":{start:{line:46,column:10},end:{line:46,column:73}},"17":{start:{line:49,column:8},end:{line:59,column:9}},"18":{start:{line:50,column:10},end:{line:58,column:11}},"19":{start:{line:51,column:12},end:{line:57,column:15}},"20":{start:{line:52,column:33},end:{line:52,column:35}},"21":{start:{line:55,column:14},end:{line:55,column:69}},"22":{start:{line:55,column:34},end:{line:55,column:69}},"23":{start:{line:56,column:14},end:{line:56,column:68}},"24":{start:{line:61,column:8},end:{line:61,column:69}},"25":{start:{line:65,column:2},end:{line:65,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:37,column:17},end:{line:37,column:18}},loc:{start:{line:37,column:35},end:{line:66,column:1}},line:37},"1":{name:"(anonymous_1)",decl:{start:{line:38,column:35},end:{line:38,column:36}},loc:{start:{line:38,column:48},end:{line:64,column:3}},line:38},"2":{name:"(anonymous_2)",decl:{start:{line:51,column:35},end:{line:51,column:36}},loc:{start:{line:51,column:73},end:{line:57,column:13}},line:51}},branchMap:{"0":{loc:{start:{line:19,column:4},end:{line:21,column:19}},type:"cond-expr",locations:[{start:{line:20,column:8},end:{line:20,column:55}},{start:{line:21,column:8},end:{line:21,column:19}}],line:19},"1":{loc:{start:{line:23,column:11},end:{line:23,column:95}},type:"cond-expr",locations:[{start:{line:23,column:67},end:{line:23,column:75}},{start:{line:23,column:78},end:{line:23,column:95}}],line:23},"2":{loc:{start:{line:40,column:4},end:{line:63,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:63,column:5}},{start:{line:40,column:4},end:{line:63,column:5}}],line:40},"3":{loc:{start:{line:50,column:10},end:{line:58,column:11}},type:"if",locations:[{start:{line:50,column:10},end:{line:58,column:11}},{start:{line:50,column:10},end:{line:58,column:11}}],line:50},"4":{loc:{start:{line:55,column:14},end:{line:55,column:69}},type:"if",locations:[{start:{line:55,column:14},end:{line:55,column:69}},{start:{line:55,column:14},end:{line:55,column:69}}],line:55}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2aa9dc9c7e8cf2c51a271a0a9a749dd3d0359075"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_4f45j9k2i=function(){return actualCoverage;};}return actualCoverage;}cov_4f45j9k2i();const fs=(cov_4f45j9k2i().s[0]++,require('fs'));const express=(cov_4f45j9k2i().s[1]++,require('express'));const{debugApp}=(cov_4f45j9k2i().s[2]++,require('../config/debug'));const{SERVER_HOST,PORT,NODE_ENV}=(cov_4f45j9k2i().s[3]++,process.env);const apiDoc=(cov_4f45j9k2i().s[4]++,{swagger:'2.0',title:'Amicar API Doc.',info:{description:'',version:'0.0.1',title:'Amicar evaluation Doc.',termsOfService:'https://www.amicar.cl/terminos-y-condiciones',contact:{email:'ti@amicar.cl'}},host:['test','dev','development'].indexOf(NODE_ENV)>-1?(cov_4f45j9k2i().b[0][0]++,`${SERVER_HOST.replace('http://','')}:${PORT}`):(cov_4f45j9k2i().b[0][1]++,SERVER_HOST),basePath:'/',schemes:['test','dev','development'].indexOf(NODE_ENV)>-1?(cov_4f45j9k2i().b[1][0]++,['http']):(cov_4f45j9k2i().b[1][1]++,['https','http']),paths:{},securityDefinitions:{api_key:{type:'apiKey',name:'x-api-key',in:'header'}},definitions:{}});const router=(cov_4f45j9k2i().s[5]++,express.Router());const basePath=(cov_4f45j9k2i().s[6]++,__dirname);cov_4f45j9k2i().s[7]++;module.exports=dependencies=>{cov_4f45j9k2i().f[0]++;cov_4f45j9k2i().s[8]++;fs.readdirSync(basePath).forEach(dirName=>{cov_4f45j9k2i().f[1]++;const dirPath=(cov_4f45j9k2i().s[9]++,`${basePath}/${dirName}`);cov_4f45j9k2i().s[10]++;if(fs.lstatSync(dirPath).isDirectory()){cov_4f45j9k2i().b[2][0]++;cov_4f45j9k2i().s[11]++;try{const ctrlPaths=(cov_4f45j9k2i().s[12]++,require(dirPath)(dependencies));cov_4f45j9k2i().s[13]++;try{const{paths,definitions}=(cov_4f45j9k2i().s[14]++,require(`${dirPath}/apiDoc.json`));cov_4f45j9k2i().s[15]++;apiDoc.paths={...apiDoc.paths,...paths};cov_4f45j9k2i().s[16]++;apiDoc.definitions={...apiDoc.definitions,...definitions};}catch(e){}cov_4f45j9k2i().s[17]++;for(const key in ctrlPaths){cov_4f45j9k2i().s[18]++;if(ctrlPaths.hasOwnProperty(key)){cov_4f45j9k2i().b[3][0]++;cov_4f45j9k2i().s[19]++;ctrlPaths[key].forEach(({method,path,ctrlMiddleware})=>{cov_4f45j9k2i().f[2]++;const middleware=(cov_4f45j9k2i().s[20]++,[]);// if (authentication) middleware.push(expressAuthentication);
// if (profileAccess) middleware.push(validateProfile(profileAccess));
cov_4f45j9k2i().s[21]++;if(ctrlMiddleware){cov_4f45j9k2i().b[4][0]++;cov_4f45j9k2i().s[22]++;middleware.push(...ctrlMiddleware);}else{cov_4f45j9k2i().b[4][1]++;}cov_4f45j9k2i().s[23]++;router.route(`/${key}${path}`)[method](...middleware);});}else{cov_4f45j9k2i().b[3][1]++;}}}catch(err){cov_4f45j9k2i().s[24]++;debugApp(`>>>>>>>>>>>>>: ${__filename}::ERROR: `,err.stack);}}else{cov_4f45j9k2i().b[2][1]++;}});cov_4f45j9k2i().s[25]++;return{router,apiDoc};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsImV4cHJlc3MiLCJkZWJ1Z0FwcCIsIlNFUlZFUl9IT1NUIiwiUE9SVCIsIk5PREVfRU5WIiwicHJvY2VzcyIsImVudiIsImFwaURvYyIsInN3YWdnZXIiLCJ0aXRsZSIsImluZm8iLCJkZXNjcmlwdGlvbiIsInZlcnNpb24iLCJ0ZXJtc09mU2VydmljZSIsImNvbnRhY3QiLCJlbWFpbCIsImhvc3QiLCJpbmRleE9mIiwicmVwbGFjZSIsImJhc2VQYXRoIiwic2NoZW1lcyIsInBhdGhzIiwic2VjdXJpdHlEZWZpbml0aW9ucyIsImFwaV9rZXkiLCJ0eXBlIiwibmFtZSIsImluIiwiZGVmaW5pdGlvbnMiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJfX2Rpcm5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVwZW5kZW5jaWVzIiwicmVhZGRpclN5bmMiLCJmb3JFYWNoIiwiZGlyTmFtZSIsImRpclBhdGgiLCJsc3RhdFN5bmMiLCJpc0RpcmVjdG9yeSIsImN0cmxQYXRocyIsImUiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIm1ldGhvZCIsInBhdGgiLCJjdHJsTWlkZGxld2FyZSIsIm1pZGRsZXdhcmUiLCJwdXNoIiwicm91dGUiLCJlcnIiLCJfX2ZpbGVuYW1lIiwic3RhY2siXSwibWFwcGluZ3MiOiI2bUhBZVk7eUZBZlosS0FBTUEsQ0FBQUEsRUFBRSx5QkFBR0MsT0FBTyxDQUFDLElBQUQsQ0FBVixDQUFSLENBQ0EsS0FBTUMsQ0FBQUEsT0FBTyx5QkFBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFiLENBQ0EsS0FBTSxDQUFFRSxRQUFGLDBCQUFlRixPQUFPLENBQUMsaUJBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUcsV0FBRixDQUFlQyxJQUFmLENBQXFCQyxRQUFyQiwwQkFBa0NDLE9BQU8sQ0FBQ0MsR0FBMUMsQ0FBTixDQUVBLEtBQU1DLENBQUFBLE1BQU0seUJBQUcsQ0FDYkMsT0FB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TUFBTSxDQUFDcUIsS0FBUCxDQUFjLElBQUdQLEdBQUksR0FBRUcsSUFBSyxFQUE1QixFQUErQkQsTUFBL0IsRUFBdUMsR0FBR0csVUFBMUMsRUFDRCxDQU5ELEVBT0QsQ0FSRCxnQ0FTRCxDQUNGLENBQUMsTUFBT0csR0FBUCxDQUFZLHlCQUNaakQsUUFBUSxDQUFFLGtCQUFpQmtELFVBQVcsV0FBOUIsQ0FBMENELEdBQUcsQ0FBQ0UsS0FBOUMsQ0FBUixDQUNELENBQ0YsQ0F2QkQsZ0NBd0JELENBMUJELEVBRGlDLHdCQTRCakMsTUFBTyxDQUFFeEIsTUFBRixDQUFVckIsTUFBVixDQUFQLENBQ0QsQ0E3QkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgZGVidWdBcHAgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZy9kZWJ1ZycpO1xyXG5jb25zdCB7IFNFUlZFUl9IT1NULCBQT1JULCBOT0RFX0VOViB9ID0gcHJvY2Vzcy5lbnY7XHJcblxyXG5jb25zdCBhcGlEb2MgPSB7XHJcbiAgc3dhZ2dlcjogJzIuMCcsXHJcbiAgdGl0bGU6ICdBbWljYXIgQVBJIERvYy4nLFxyXG4gIGluZm86IHtcclxuICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgIHZlcnNpb246ICcwLjAuMScsXHJcbiAgICB0aXRsZTogJ0FtaWNhciBldmFsdWF0aW9uIERvYy4nLFxyXG4gICAgdGVybXNPZlNlcnZpY2U6ICdodHRwczovL3d3dy5hbWljYXIuY2wvdGVybWlub3MteS1jb25kaWNpb25lcycsXHJcbiAgICBjb250YWN0OiB7XHJcbiAgICAgIGVtYWlsOiAndGlAYW1pY2FyLmNsJyxcclxuICAgIH0sXHJcbiAgfSxcclxuICBob3N0OlxyXG4gICAgWyd0ZXN0JywgJ2RldicsICdkZXZlbG9wbWVudCddLmluZGV4T2YoTk9ERV9FTlYpID4gLTFcclxuICAgICAgPyBgJHtTRVJWRVJfSE9TVC5yZXBsYWNlKCdodHRwOi8vJywgJycpfToke1BPUlR9YFxyXG4gICAgICA6IFNFUlZFUl9IT1NULFxyXG4gIGJhc2VQYXRoOiAnLycsXHJcbiAgc2NoZW1lczogWyd0ZXN0JywgJ2RldicsICdkZXZlbG9wbWVudCddLmluZGV4T2YoTk9ERV9FTlYpID4gLTEgPyBbJ2h0dHAnXSA6IFsnaHR0cHMnLCAnaHR0cCddLFxyXG4gIHBhdGhzOiB7fSxcclxuICBzZWN1cml0eURlZmluaXRpb25zOiB7XHJcbiAgICBhcGlfa2V5OiB7XHJcbiAgICAgIHR5cGU6ICdhcGlLZXknLFxyXG4gICAgICBuYW1lOiAneC1hcGkta2V5JyxcclxuICAgICAgaW46ICdoZWFkZXInLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIGRlZmluaXRpb25zOiB7fSxcclxufTtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IGJhc2VQYXRoID0gX19kaXJuYW1lO1xyXG5tb2R1bGUuZXhwb3J0cyA9IChkZXBlbmRlbmNpZXMpID0+IHtcclxuICBmcy5yZWFkZGlyU3luYyhiYXNlUGF0aCkuZm9yRWFjaCgoZGlyTmFtZSkgPT4ge1xyXG4gICAgY29uc3QgZGlyUGF0aCA9IGAke2Jhc2VQYXRofS8ke2Rpck5hbWV9YDtcclxuICAgIGlmIChmcy5sc3RhdFN5bmMoZGlyUGF0aCkuaXNEaXJlY3RvcnkoKSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGN0cmxQYXRocyA9IHJlcXVpcmUoZGlyUGF0aCkoZGVwZW5kZW5jaWVzKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgeyBwYXRocywgZGVmaW5pdGlvbnMgfSA9IHJlcXVpcmUoYCR7ZGlyUGF0aH0vYXBpRG9jLmpzb25gKTtcclxuICAgICAgICAgIGFwaURvYy5wYXRocyA9IHsgLi4uYXBpRG9jLnBhdGhzLCAuLi5wYXRocyB9O1xyXG4gICAgICAgICAgYXBpRG9jLmRlZmluaXRpb25zID0geyAuLi5hcGlEb2MuZGVmaW5pdGlvbnMsIC4uLmRlZmluaXRpb25zIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge31cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3RybFBhdGhzKSB7XHJcbiAgICAgICAgICBpZiAoY3RybFBhdGhzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgY3RybFBhdGhzW2tleV0uZm9yRWFjaCgoeyBtZXRob2QsIHBhdGgsIGN0cmxNaWRkbGV3YXJlIH0pID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBtaWRkbGV3YXJlID0gW107XHJcbiAgICAgICAgICAgICAgLy8gaWYgKGF1dGhlbnRpY2F0aW9uKSBtaWRkbGV3YXJlLnB1c2goZXhwcmVzc0F1dGhlbnRpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAvLyBpZiAocHJvZmlsZUFjY2VzcykgbWlkZGxld2FyZS5wdXNoKHZhbGlkYXRlUHJvZmlsZShwcm9maWxlQWNjZXNzKSk7XHJcbiAgICAgICAgICAgICAgaWYgKGN0cmxNaWRkbGV3YXJlKSBtaWRkbGV3YXJlLnB1c2goLi4uY3RybE1pZGRsZXdhcmUpO1xyXG4gICAgICAgICAgICAgIHJvdXRlci5yb3V0ZShgLyR7a2V5fSR7cGF0aH1gKVttZXRob2RdKC4uLm1pZGRsZXdhcmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGRlYnVnQXBwKGA+Pj4+Pj4+Pj4+Pj4+OiAke19fZmlsZW5hbWV9OjpFUlJPUjogYCwgZXJyLnN0YWNrKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiB7IHJvdXRlciwgYXBpRG9jIH07XHJcbn07XHJcbiJdfQ==