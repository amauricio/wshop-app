function cov_vxv572s60(){var path="/vagrant/continuum/core/src/modules/evaluation/middlewares/per/v1/rules/fn/formatAmicarsEvaluation.js";var hash="f13b5e7561071c60fa34743a97f26aeddb0a2091";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/modules/evaluation/middlewares/per/v1/rules/fn/formatAmicarsEvaluation.js",statementMap:{"0":{start:{line:2,column:46},end:{line:2,column:124}},"1":{start:{line:5,column:18},end:{line:7,column:3}},"2":{start:{line:6,column:4},end:{line:6,column:40}},"3":{start:{line:9,column:20},end:{line:19,column:3}},"4":{start:{line:10,column:17},end:{line:10,column:18}},"5":{start:{line:12,column:4},end:{line:16,column:7}},"6":{start:{line:13,column:6},end:{line:15,column:7}},"7":{start:{line:14,column:8},end:{line:14,column:73}},"8":{start:{line:18,column:4},end:{line:18,column:18}},"9":{start:{line:21,column:36},end:{line:22,column:86}},"10":{start:{line:22,column:0},end:{line:22,column:86}},"11":{start:{line:24,column:45},end:{line:25,column:42}},"12":{start:{line:25,column:0},end:{line:25,column:42}},"13":{start:{line:27,column:46},end:{line:27,column:112}},"14":{start:{line:27,column:81},end:{line:27,column:112}},"15":{start:{line:29,column:49},end:{line:29,column:111}},"16":{start:{line:29,column:82},end:{line:29,column:111}},"17":{start:{line:31,column:46},end:{line:31,column:116}},"18":{start:{line:31,column:83},end:{line:31,column:116}},"19":{start:{line:33,column:39},end:{line:33,column:89}},"20":{start:{line:33,column:66},end:{line:33,column:89}},"21":{start:{line:35,column:36},end:{line:41,column:1}},"22":{start:{line:36,column:34},end:{line:36,column:64}},"23":{start:{line:37,column:22},end:{line:37,column:39}},"24":{start:{line:38,column:19},end:{line:38,column:72}},"25":{start:{line:40,column:4},end:{line:40,column:24}},"26":{start:{line:43,column:26},end:{line:52,column:3}},"27":{start:{line:44,column:21},end:{line:49,column:6}},"28":{start:{line:51,column:4},end:{line:51,column:48}},"29":{start:{line:54,column:0},end:{line:115,column:4}},"30":{start:{line:55,column:32},end:{line:55,column:73}},"31":{start:{line:56,column:4},end:{line:114,column:6}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:18},end:{line:5,column:19}},loc:{start:{line:5,column:39},end:{line:7,column:3}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:20},end:{line:9,column:21}},loc:{start:{line:9,column:68},end:{line:19,column:3}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:21},end:{line:12,column:22}},loc:{start:{line:12,column:31},end:{line:16,column:5}},line:12},"3":{name:"(anonymous_3)",decl:{start:{line:21,column:36},end:{line:21,column:37}},loc:{start:{line:22,column:0},end:{line:22,column:86}},line:22},"4":{name:"(anonymous_4)",decl:{start:{line:24,column:45},end:{line:24,column:46}},loc:{start:{line:25,column:0},end:{line:25,column:42}},line:25},"5":{name:"(anonymous_5)",decl:{start:{line:27,column:46},end:{line:27,column:47}},loc:{start:{line:27,column:81},end:{line:27,column:112}},line:27},"6":{name:"(anonymous_6)",decl:{start:{line:29,column:49},end:{line:29,column:50}},loc:{start:{line:29,column:82},end:{line:29,column:111}},line:29},"7":{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:83},end:{line:31,column:116}},line:31},"8":{name:"(anonymous_8)",decl:{start:{line:33,column:39},end:{line:33,column:40}},loc:{start:{line:33,column:66},end:{line:33,column:89}},line:33},"9":{name:"(anonymous_9)",decl:{start:{line:35,column:36},end:{line:35,column:37}},loc:{start:{line:35,column:90},end:{line:41,column:1}},line:35},"10":{name:"(anonymous_10)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:55},end:{line:52,column:3}},line:43},"11":{name:"(anonymous_11)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:68},end:{line:115,column:3}},line:54}},branchMap:{"0":{loc:{start:{line:6,column:11},end:{line:6,column:39}},type:"binary-expr",locations:[{start:{line:6,column:11},end:{line:6,column:23}},{start:{line:6,column:27},end:{line:6,column:39}}],line:6},"1":{loc:{start:{line:13,column:6},end:{line:15,column:7}},type:"if",locations:[{start:{line:13,column:6},end:{line:15,column:7}},{start:{line:13,column:6},end:{line:15,column:7}}],line:13},"2":{loc:{start:{line:14,column:17},end:{line:14,column:72}},type:"cond-expr",locations:[{start:{line:14,column:29},end:{line:14,column:47}},{start:{line:14,column:50},end:{line:14,column:72}}],line:14},"3":{loc:{start:{line:22,column:0},end:{line:22,column:86}},type:"binary-expr",locations:[{start:{line:22,column:1},end:{line:22,column:40}},{start:{line:22,column:46},end:{line:22,column:85}}],line:22},"4":{loc:{start:{line:51,column:11},end:{line:51,column:47}},type:"cond-expr",locations:[{start:{line:51,column:22},end:{line:51,column:43}},{start:{line:51,column:46},end:{line:51,column:47}}],line:51}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f13b5e7561071c60fa34743a97f26aeddb0a2091"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_vxv572s60=function(){return actualCoverage;};}return actualCoverage;}cov_vxv572s60();const{getDataFromEquifax,validationRules}=(cov_vxv572s60().s[0]++,require('modules/evaluation/middlewares/per/v1/equifax/fn/getDataFromEquifax'));cov_vxv572s60().s[1]++;const isInRange=(min,max,value)=>{cov_vxv572s60().f[0]++;cov_vxv572s60().s[2]++;return(cov_vxv572s60().b[0][0]++,value>=min)&&(cov_vxv572s60().b[0][1]++,value<=max);};cov_vxv572s60().s[3]++;const getMaxRci=(downPaymentPercentage,isHyundai,rciRules)=>{cov_vxv572s60().f[1]++;let maxRci=(cov_vxv572s60().s[4]++,0);cov_vxv572s60().s[5]++;rciRules.forEach(rule=>{cov_vxv572s60().f[2]++;cov_vxv572s60().s[6]++;if(isInRange(rule.rangeMin,rule.rangeMax,downPaymentPercentage)){cov_vxv572s60().b[1][0]++;cov_vxv572s60().s[7]++;maxRci=isHyundai?(cov_vxv572s60().b[2][0]++,rule.maxRciHyundai):(cov_vxv572s60().b[2][1]++,rule.maxRciOtherBrands);}else{cov_vxv572s60().b[1][1]++;}});cov_vxv572s60().s[8]++;return maxRci;};cov_vxv572s60().s[9]++;const validateAgeWithinParameters=(customerAge,ageRangeRules)=>{cov_vxv572s60().f[3]++;cov_vxv572s60().s[10]++;return(cov_vxv572s60().b[3][0]++,ageRangeRules.minimumAge<=customerAge)&&(cov_vxv572s60().b[3][1]++,customerAge<=ageRangeRules.maximumAge);};cov_vxv572s60().s[11]++;const validateEquifaxScoreWithinParameters=(equifaxScore,minimumAllowedEquifaxScore)=>{cov_vxv572s60().f[4]++;cov_vxv572s60().s[12]++;return equifaxScore>=minimumAllowedEquifaxScore;};cov_vxv572s60().s[13]++;const validateMinimumIncomeWithinParameters=(customerIncome,minimumIncome)=>{cov_vxv572s60().f[5]++;cov_vxv572s60().s[14]++;return customerIncome>=minimumIncome;};cov_vxv572s60().s[15]++;const validateMinimumSeniorityWithinParameters=(seniority,minimumSeniority)=>{cov_vxv572s60().f[6]++;cov_vxv572s60().s[16]++;return seniority>=minimumSeniority;};cov_vxv572s60().s[17]++;const validateDelinquenciesWithinParameters=(delinquencies,maxDelinquencies)=>{cov_vxv572s60().f[7]++;cov_vxv572s60().s[18]++;return delinquencies<=maxDelinquencies;};cov_vxv572s60().s[19]++;const validateRatingWithinParameters=(rating,minimumRating)=>{cov_vxv572s60().f[8]++;cov_vxv572s60().s[20]++;return rating>=minimumRating;};cov_vxv572s60().s[21]++;const validateRciWithinParameters=(rci,carBrandId,carPrice,downPayment,rciRules)=>{cov_vxv572s60().f[9]++;const downPaymentPercentage=(cov_vxv572s60().s[22]++,downPayment/carPrice*100);const isHyundai=(cov_vxv572s60().s[23]++,carBrandId===69);const maxRci=(cov_vxv572s60().s[24]++,getMaxRci(downPaymentPercentage,isHyundai,rciRules));cov_vxv572s60().s[25]++;return rci<maxRci;};cov_vxv572s60().s[26]++;const getIdentifierType=async(deps,externalCode)=>{cov_vxv572s60().f[10]++;const response=(cov_vxv572s60().s[27]++,await deps.commonModels.CoreParamsPgModel.findOne({where:{externalCode,type:'IDENTIFICATION_TYPE'}}));cov_vxv572s60().s[28]++;return response?(cov_vxv572s60().b[4][0]++,response.internalCode):(cov_vxv572s60().b[4][1]++,1);};cov_vxv572s60().s[29]++;module.exports=async(deps,customerRequest,equifaxResponse)=>{cov_vxv572s60().f[11]++;const equifaxPersonalInfo=(cov_vxv572s60().s[30]++,await getDataFromEquifax(equifaxResponse));cov_vxv572s60().s[31]++;return{identifierType:await getIdentifierType(deps,String(customerRequest.identifierType)),identifierValue:customerRequest.identifierValue,externalId:customerRequest.externalId,channel:customerRequest.channel,name:customerRequest.name,lastName:customerRequest.lastName,motherLastName:customerRequest.motherLastName,income:customerRequest.income,email:customerRequest.email,phone:customerRequest.phone,carPrice:customerRequest.carPrice,downPayment:customerRequest.downPayment,vehicleType:customerRequest.vehicleType,monthlyPayment:customerRequest.monthlyPayment,importer:customerRequest.importer,seniority:customerRequest.seniority,carBrand:customerRequest.carBrand,currencyType:customerRequest.currencyType,age:equifaxPersonalInfo.equifaxReportedAge,rci:equifaxPersonalInfo.calculateRCI,equifaxScore:equifaxPersonalInfo.equifaxScore,delinquencies:equifaxPersonalInfo.delinquenciesAmount,ageWithinParameters:validateAgeWithinParameters(equifaxPersonalInfo.equifaxReportedAge,validationRules.ageRange),ratingWithinParameters:validateRatingWithinParameters(equifaxPersonalInfo.normalRatingPercentage,validationRules.minimumRating),delinquenciesWithinParameters:validateDelinquenciesWithinParameters(equifaxPersonalInfo.delinquenciesAmount,validationRules.maxDelinquencies),rciWithinParameters:validateRciWithinParameters(equifaxPersonalInfo.calculateRCI,customerRequest.carBrand,customerRequest.carPrice,customerRequest.downPayment,validationRules.rci),minimumIncomeWithinParameters:validateMinimumIncomeWithinParameters(customerRequest.income,validationRules.minimumIncome),minimumSeniorityWithinParameters:validateMinimumSeniorityWithinParameters(customerRequest.seniority,validationRules.minimumSeniority),equifaxScoreWithinParameters:validateEquifaxScoreWithinParameters(equifaxPersonalInfo.equifaxScore,validationRules.minimumAllowedEquifaxScore),rawCustomerRequest:customerRequest,rawEquifaxResponse:equifaxResponse,equifaxResponseCachedAt:equifaxResponse.equifaxResponseDate};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1hdEFtaWNhcnNFdmFsdWF0aW9uLmpzIl0sIm5hbWVzIjpbImdldERhdGFGcm9tRXF1aWZheCIsInZhbGlkYXRpb25SdWxlcyIsInJlcXVpcmUiLCJpc0luUmFuZ2UiLCJtaW4iLCJtYXgiLCJ2YWx1ZSIsImdldE1heFJjaSIsImRvd25QYXltZW50UGVyY2VudGFnZSIsImlzSHl1bmRhaSIsInJjaVJ1bGVzIiwibWF4UmNpIiwiZm9yRWFjaCIsInJ1bGUiLCJyYW5nZU1pbiIsInJhbmdlTWF4IiwibWF4UmNpSHl1bmRhaSIsIm1heFJjaU90aGVyQnJhbmRzIiwidmFsaWRhdGVBZ2VXaXRoaW5QYXJhbWV0ZXJzIiwiY3VzdG9tZXJBZ2UiLCJhZ2VSYW5nZVJ1bGVzIiwibWluaW11bUFnZSIsIm1heGltdW1BZ2UiLCJ2YWxpZGF0ZUVxdWlmYXhTY29yZVdpdGhpblBhcmFtZXRlcnMiLCJlcXVpZmF4U2NvcmUiLCJtaW5pbXVtQWxsb3dlZEVxdWlmYXhTY29yZSIsInZhbGlkYXRlTWluaW11bUluY29tZVdpdGhpblBhcmFtZXRlcnMiLCJjdXN0b21lckluY29tZSIsIm1pbmltdW1JbmNvbWUiLCJ2YWxpZGF0ZU1pbmltdW1TZW5pb3JpdHlXaXRoaW5QYXJhbWV0ZXJzIiwic2VuaW9yaXR5IiwibWluaW11bVNlbmlvcml0eSIsInZhbGlkYXRlRGVsaW5xdWVuY2llc1dpdGhpblBhcmFtZXRlcnMiLCJkZWxpbnF1ZW5jaWVzIiwibWF4RGVsaW5xdWVuY2llcyIsInZhbGlkYXRlUmF0aW5nV2l0aGluUGFyYW1ldGVycyIsInJhdGluZyIsIm1pbmltdW1SYXRpbmciLCJ2YWxpZGF0ZVJjaVdpdGhpblBhcmFtZXRlcnMiLCJyY2kiLCJjYXJCcmFuZElkIiwiY2FyUHJpY2UiLCJkb3duUGF5bWVudCIsImdldElkZW50aWZpZXJUeXBlIiwiZGVwcyIsImV4dGVybmFsQ29kZSIsInJlc3BvbnNlIiwiY29tbW9uTW9kZWxzIiwiQ29yZVBhcmFtc1BnTW9kZWwiLCJmaW5kT25lIiwid2hlcmUiLCJ0eXBlIiwiaW50ZXJuYWxDb2RlIiwibW9kdWxlIiwiZXhwb3J0cyIsImN1c3RvbWVyUmVxdWVzdCIsImVxdWlmYXhSZXNwb25zZSIsImVxdWlmYXhQZXJzb25hbEluZm8iLCJpZGVudGlmaWVyVHlwZSIsIlN0cmluZyIsImlkZW50aWZpZXJWYWx1ZSIsImV4dGVybmFsSWQiLCJjaGFubmVsIiwibmFtZSIsImxhc3ROYW1lIiwibW90aGVyTGFzdE5hbWUiLCJpbmNvbWUiLCJlbWFpbCIsInBob25lIiwidmVoaWNsZVR5cGUiLCJtb250aGx5UGF5bWVudCIsImltcG9ydGVyIiwiY2FyQnJhbmQiLCJjdXJyZW5jeVR5cGUiLCJhZ2UiLCJlcXVpZmF4UmVwb3J0ZWRBZ2UiLCJjYWxjdWxhdGVSQ0kiLCJkZWxpbnF1ZW5jaWVzQW1vdW50IiwiYWdlV2l0aGluUGFyYW1ldGVycyIsImFnZVJhbmdlIiwicmF0aW5nV2l0aGluUGFyYW1ldGVycyIsIm5vcm1hbFJhdGluZ1BlcmNlbnRhZ2UiLCJkZWxpbnF1ZW5jaWVzV2l0aGluUGFyYW1ldGVycyIsInJjaVdpdGhpblBhcmFtZXRlcnMiLCJtaW5pbXVtSW5jb21lV2l0aGluUGFyYW1ldGVycyIsIm1pbmltdW1TZW5pb3JpdHlXaXRoaW5QYXJhbWV0ZXJzIiwiZXF1aWZheFNjb3JlV2l0aGluUGFyYW1ldGVycyIsInJhd0N1c3RvbWVyUmVxdWVzdCIsInJhd0VxdWlmYXhSZXNwb25zZSIsImVxdWlmYXhSZXNwb25zZUNhY2hlZEF0IiwiZXF1aWZheFJlc3BvbnNlRGF0ZSJdLCJtYXBwaW5ncyI6InE5S0FlWTt5RkFkWixLQUFNLENBQUNBLGtCQUFELENBQXFCQyxlQUFyQiwwQkFBd0NDLE9BQU8sQ0FBQyxxRUFBRCxDQUEvQyxDQUFOLEMsdUJBR0EsS0FBTUMsQ0FBQUEsU0FBUyxDQUFHLENBQUNDLEdBQUQsQ0FBTUMsR0FBTixDQUFXQyxLQUFYLEdBQXFCLCtDQUNuQyxNQUFPLDJCQUFBQSxLQUFLLEVBQUlGLEdBQVQsOEJBQWdC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dCI6WyJcclxuY29uc3Qge2dldERhdGFGcm9tRXF1aWZheCwgdmFsaWRhdGlvblJ1bGVzfSA9IHJlcXVpcmUoJ21vZHVsZXMvZXZhbHVhdGlvbi9taWRkbGV3YXJlcy9wZXIvdjEvZXF1aWZheC9mbi9nZXREYXRhRnJvbUVxdWlmYXgnKTtcclxuXHJcblxyXG5jb25zdCBpc0luUmFuZ2UgPSAobWluLCBtYXgsIHZhbHVlKSA9PiB7XHJcbiAgICByZXR1cm4gdmFsdWUgPj0gbWluICYmIHZhbHVlIDw9IG1heDtcclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGdldE1heFJjaSA9IChkb3duUGF5bWVudFBlcmNlbnRhZ2UsIGlzSHl1bmRhaSwgcmNpUnVsZXMpID0+IHtcclxuICAgIGxldCBtYXhSY2kgPSAwO1xyXG4gIFxyXG4gICAgcmNpUnVsZXMuZm9yRWFjaCgocnVsZSkgPT4ge1xyXG4gICAgICBpZiAoaXNJblJhbmdlKHJ1bGUucmFuZ2VNaW4sIHJ1bGUucmFuZ2VNYXgsIGRvd25QYXltZW50UGVyY2VudGFnZSkpIHtcclxuICAgICAgICBtYXhSY2kgPSBpc0h5dW5kYWkgPyBydWxlLm1heFJjaUh5dW5kYWkgOiBydWxlLm1heFJjaU90aGVyQnJhbmRzO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICBcclxuICAgIHJldHVybiBtYXhSY2k7XHJcbiAgfTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlQWdlV2l0aGluUGFyYW1ldGVycyA9IChjdXN0b21lckFnZSwgYWdlUmFuZ2VSdWxlcykgPT5cclxuKGFnZVJhbmdlUnVsZXMubWluaW11bUFnZSA8PSBjdXN0b21lckFnZSkgJiYgKGN1c3RvbWVyQWdlIDw9IGFnZVJhbmdlUnVsZXMubWF4aW11bUFnZSk7XHJcblxyXG5jb25zdCB2YWxpZGF0ZUVxdWlmYXhTY29yZVdpdGhpblBhcmFtZXRlcnMgPSAoZXF1aWZheFNjb3JlLCBtaW5pbXVtQWxsb3dlZEVxdWlmYXhTY29yZSkgPT5cclxuZXF1aWZheFNjb3JlID49IG1pbmltdW1BbGxvd2VkRXF1aWZheFNjb3JlO1xyXG5cclxuY29uc3QgdmFsaWRhdGVNaW5pbXVtSW5jb21lV2l0aGluUGFyYW1ldGVycyA9IChjdXN0b21lckluY29tZSwgbWluaW11bUluY29tZSkgPT4gY3VzdG9tZXJJbmNvbWUgPj0gbWluaW11bUluY29tZTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlTWluaW11bVNlbmlvcml0eVdpdGhpblBhcmFtZXRlcnMgPSAoc2VuaW9yaXR5LCBtaW5pbXVtU2VuaW9yaXR5KSA9PiBzZW5pb3JpdHkgPj0gbWluaW11bVNlbmlvcml0eTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlRGVsaW5xdWVuY2llc1dpdGhpblBhcmFtZXRlcnMgPSAoZGVsaW5xdWVuY2llcywgbWF4RGVsaW5xdWVuY2llcykgPT4gZGVsaW5xdWVuY2llcyA8PSBtYXhEZWxpbnF1ZW5jaWVzO1xyXG5cclxuY29uc3QgdmFsaWRhdGVSYXRpbmdXaXRoaW5QYXJhbWV0ZXJzID0gKHJhdGluZywgbWluaW11bVJhdGluZykgPT4gcmF0aW5nID49IG1pbmltdW1SYXRpbmc7XHJcblxyXG5jb25zdCB2YWxpZGF0ZVJjaVdpdGhpblBhcmFtZXRlcnMgPSAocmNpLCBjYXJCcmFuZElkLCBjYXJQcmljZSwgZG93blBheW1lbnQsIHJjaVJ1bGVzKSA9PiB7XHJcbiAgICBjb25zdCBkb3duUGF5bWVudFBlcmNlbnRhZ2UgPSAoZG93blBheW1lbnQgLyBjYXJQcmljZSkgKiAxMDA7XHJcbiAgICBjb25zdCBpc0h5dW5kYWkgPSBjYXJCcmFuZElkID09PSA2OTtcclxuICAgIGNvbnN0IG1heFJjaSA9IGdldE1heFJjaShkb3duUGF5bWVudFBlcmNlbnRhZ2UsIGlzSHl1bmRhaSwgcmNpUnVsZXMpO1xyXG5cclxuICAgIHJldHVybiByY2kgPCBtYXhSY2k7XHJcbn07XHJcblxyXG5jb25zdCBnZXRJZGVudGlmaWVyVHlwZSA9IGFzeW5jIChkZXBzLGV4dGVybmFsQ29kZSkgPT4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZXBzLmNvbW1vbk1vZGVscy5Db3JlUGFyYW1zUGdNb2RlbC5maW5kT25lKHtcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICBleHRlcm5hbENvZGUsXHJcbiAgICAgICAgdHlwZTogJ0lERU5USUZJQ0FUSU9OX1RZUEUnLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICByZXR1cm4gcmVzcG9uc2UgPyByZXNwb25zZS5pbnRlcm5hbENvZGUgOiAxO1xyXG4gIH07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBhc3luYyAoZGVwcywgY3VzdG9tZXJSZXF1ZXN0LCBlcXVpZmF4UmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IGVxdWlmYXhQZXJzb25hbEluZm8gPSBhd2FpdCBnZXREYXRhRnJvbUVxdWlmYXgoZXF1aWZheFJlc3BvbnNlKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIFxyXG4gICAgICBpZGVudGlmaWVyVHlwZTogYXdhaXQgZ2V0SWRlbnRpZmllclR5cGUoZGVwcywgU3RyaW5nKGN1c3RvbWVyUmVxdWVzdC5pZGVudGlmaWVyVHlwZSkpLFxyXG4gICAgICBpZGVudGlmaWVyVmFsdWU6IGN1c3RvbWVyUmVxdWVzdC5pZGVudGlmaWVyVmFsdWUsXHJcbiAgICAgIGV4dGVybmFsSWQ6IGN1c3RvbWVyUmVxdWVzdC5leHRlcm5hbElkLFxyXG4gICAgICBjaGFubmVsOiBjdXN0b21lclJlcXVlc3QuY2hhbm5lbCxcclxuICAgICAgbmFtZTogY3VzdG9tZXJSZXF1ZXN0Lm5hbWUsXHJcbiAgICAgIGxhc3ROYW1lOiBjdXN0b21lclJlcXVlc3QubGFzdE5hbWUsXHJcbiAgICAgIG1vdGhlckxhc3ROYW1lOiBjdXN0b21lclJlcXVlc3QubW90aGVyTGFzdE5hbWUsXHJcbiAgICAgIGluY29tZTogY3VzdG9tZXJSZXF1ZXN0LmluY29tZSxcclxuICAgICAgZW1haWw6IGN1c3RvbWVyUmVxdWVzdC5lbWFpbCxcclxuICAgICAgcGhvbmU6IGN1c3RvbWVyUmVxdWVzdC5waG9uZSxcclxuICAgICAgY2FyUHJpY2U6IGN1c3RvbWVyUmVxdWVzdC5jYXJQcmljZSxcclxuICAgICAgZG93blBheW1lbnQ6IGN1c3RvbWVyUmVxdWVzdC5kb3duUGF5bWVudCxcclxuICAgICAgdmVoaWNsZVR5cGU6IGN1c3RvbWVyUmVxdWVzdC52ZWhpY2xlVHlwZSxcclxuICAgICAgbW9udGhseVBheW1lbnQ6IGN1c3RvbWVyUmVxdWVzdC5tb250aGx5UGF5bWVudCxcclxuICAgICAgaW1wb3J0ZXI6IGN1c3RvbWVyUmVxdWVzdC5pbXBvcnRlcixcclxuICAgICAgc2VuaW9yaXR5OiBjdXN0b21lclJlcXVlc3Quc2VuaW9yaXR5LFxyXG4gICAgICBjYXJCcmFuZDogY3VzdG9tZXJSZXF1ZXN0LmNhckJyYW5kLFxyXG4gICAgICBjdXJyZW5jeVR5cGU6IGN1c3RvbWVyUmVxdWVzdC5jdXJyZW5jeVR5cGUsXHJcbiAgICAgIGFnZTogZXF1aWZheFBlcnNvbmFsSW5mby5lcXVpZmF4UmVwb3J0ZWRBZ2UsXHJcbiAgICAgIHJjaTogZXF1aWZheFBlcnNvbmFsSW5mby5jYWxjdWxhdGVSQ0ksXHJcbiAgICAgIGVxdWlmYXhTY29yZTogZXF1aWZheFBlcnNvbmFsSW5mby5lcXVpZmF4U2NvcmUsXHJcbiAgICAgIGRlbGlucXVlbmNpZXM6IGVxdWlmYXhQZXJzb25hbEluZm8uZGVsaW5xdWVuY2llc0Ftb3VudCxcclxuICAgICAgYWdlV2l0aGluUGFyYW1ldGVyczogdmFsaWRhdGVBZ2VXaXRoaW5QYXJhbWV0ZXJzKFxyXG4gICAgICAgIGVxdWlmYXhQZXJzb25hbEluZm8uZXF1aWZheFJlcG9ydGVkQWdlLFxyXG4gICAgICAgIHZhbGlkYXRpb25SdWxlcy5hZ2VSYW5nZSxcclxuICAgICAgKSxcclxuICAgICAgcmF0aW5nV2l0aGluUGFyYW1ldGVyczogdmFsaWRhdGVSYXRpbmdXaXRoaW5QYXJhbWV0ZXJzKFxyXG4gICAgICAgIGVxdWlmYXhQZXJzb25hbEluZm8ubm9ybWFsUmF0aW5nUGVyY2VudGFnZSxcclxuICAgICAgICB2YWxpZGF0aW9uUnVsZXMubWluaW11bVJhdGluZyxcclxuICAgICAgKSxcclxuICAgICAgZGVsaW5xdWVuY2llc1dpdGhpblBhcmFtZXRlcnM6IHZhbGlkYXRlRGVsaW5xdWVuY2llc1dpdGhpblBhcmFtZXRlcnMoXHJcbiAgICAgICAgZXF1aWZheFBlcnNvbmFsSW5mby5kZWxpbnF1ZW5jaWVzQW1vdW50LFxyXG4gICAgICAgIHZhbGlkYXRpb25SdWxlcy5tYXhEZWxpbnF1ZW5jaWVzLFxyXG4gICAgICApLFxyXG4gICAgICByY2lXaXRoaW5QYXJhbWV0ZXJzOiB2YWxpZGF0ZVJjaVdpdGhpblBhcmFtZXRlcnMoXHJcbiAgICAgICAgZXF1aWZheFBlcnNvbmFsSW5mby5jYWxjdWxhdGVSQ0ksXHJcbiAgICAgICAgY3VzdG9tZXJSZXF1ZXN0LmNhckJyYW5kLFxyXG4gICAgICAgIGN1c3RvbWVyUmVxdWVzdC5jYXJQcmljZSxcclxuICAgICAgICBjdXN0b21lclJlcXVlc3QuZG93blBheW1lbnQsXHJcbiAgICAgICAgdmFsaWRhdGlvblJ1bGVzLnJjaSxcclxuICAgICAgKSxcclxuICAgICAgbWluaW11bUluY29tZVdpdGhpblBhcmFtZXRlcnM6IHZhbGlkYXRlTWluaW11bUluY29tZVdpdGhpblBhcmFtZXRlcnMoXHJcbiAgICAgICAgY3VzdG9tZXJSZXF1ZXN0LmluY29tZSxcclxuICAgICAgICB2YWxpZGF0aW9uUnVsZXMubWluaW11bUluY29tZSxcclxuICAgICAgKSxcclxuICAgICAgbWluaW11bVNlbmlvcml0eVdpdGhpblBhcmFtZXRlcnM6IHZhbGlkYXRlTWluaW11bVNlbmlvcml0eVdpdGhpblBhcmFtZXRlcnMoXHJcbiAgICAgICAgY3VzdG9tZXJSZXF1ZXN0LnNlbmlvcml0eSxcclxuICAgICAgICB2YWxpZGF0aW9uUnVsZXMubWluaW11bVNlbmlvcml0eSxcclxuICAgICAgKSxcclxuICAgICAgZXF1aWZheFNjb3JlV2l0aGluUGFyYW1ldGVyczogdmFsaWRhdGVFcXVpZmF4U2NvcmVXaXRoaW5QYXJhbWV0ZXJzKFxyXG4gICAgICAgIGVxdWlmYXhQZXJzb25hbEluZm8uZXF1aWZheFNjb3JlLFxyXG4gICAgICAgIHZhbGlkYXRpb25SdWxlcy5taW5pbXVtQWxsb3dlZEVxdWlmYXhTY29yZSxcclxuICAgICAgKSxcclxuICAgICAgcmF3Q3VzdG9tZXJSZXF1ZXN0OiBjdXN0b21lclJlcXVlc3QsXHJcbiAgICAgIHJhd0VxdWlmYXhSZXNwb25zZTogZXF1aWZheFJlc3BvbnNlLFxyXG4gICAgICBlcXVpZmF4UmVzcG9uc2VDYWNoZWRBdDogZXF1aWZheFJlc3BvbnNlLmVxdWlmYXhSZXNwb25zZURhdGUsXHJcbiAgICB9O1xyXG4gIH07XHJcbiAgIl19