function cov_2790s8luu9(){var path="/vagrant/continuum/core/src/modules/evaluation/middlewares/wic/fn/getResponseFromWicApi.js";var hash="e5bbb61fa5c6295996039be74f8bc5fbfef98470";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/modules/evaluation/middlewares/wic/fn/getResponseFromWicApi.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:32}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:4,column:85},end:{line:4,column:96}},"3":{start:{line:6,column:30},end:{line:50,column:1}},"4":{start:{line:7,column:21},end:{line:7,column:25}},"5":{start:{line:9,column:16},end:{line:25,column:3}},"6":{start:{line:26,column:2},end:{line:49,column:5}},"7":{start:{line:27,column:25},end:{line:32,column:10}},"8":{start:{line:34,column:24},end:{line:34,column:26}},"9":{start:{line:35,column:8},end:{line:45,column:9}},"10":{start:{line:36,column:12},end:{line:36,column:71}},"11":{start:{line:37,column:12},end:{line:37,column:55}},"12":{start:{line:39,column:23},end:{line:39,column:44}},"13":{start:{line:40,column:31},end:{line:40,column:61}},"14":{start:{line:41,column:12},end:{line:43,column:13}},"15":{start:{line:42,column:16},end:{line:42,column:77}},"16":{start:{line:42,column:57},end:{line:42,column:77}},"17":{start:{line:44,column:12},end:{line:44,column:55}},"18":{start:{line:48,column:8},end:{line:48,column:56}},"19":{start:{line:51,column:0},end:{line:53,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:30},end:{line:6,column:31}},loc:{start:{line:6,column:46},end:{line:50,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:35,column:8},end:{line:45,column:9}},type:"if",locations:[{start:{line:35,column:8},end:{line:45,column:9}},{start:{line:35,column:8},end:{line:45,column:9}}],line:35},"1":{loc:{start:{line:42,column:16},end:{line:42,column:77}},type:"if",locations:[{start:{line:42,column:16},end:{line:42,column:77}},{start:{line:42,column:16},end:{line:42,column:77}}],line:42}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e5bbb61fa5c6295996039be74f8bc5fbfef98470"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2790s8luu9=function(){return actualCoverage;};}return actualCoverage;}cov_2790s8luu9();const xml2js=(cov_2790s8luu9().s[0]++,require('xml2js'));const axios=(cov_2790s8luu9().s[1]++,require('axios'));const{USE_MOCK_DATA,WIC_BASE_URL,WIC_CLIENT_ID,WIC_CLIENT_SECRET,WIC_TOKEN}=(cov_2790s8luu9().s[2]++,process.env);cov_2790s8luu9().s[3]++;const getResponseFromWicApi=async body=>{cov_2790s8luu9().f[0]++;const dataToSend=(cov_2790s8luu9().s[4]++,body);let nMapped=(cov_2790s8luu9().s[5]++,{tipo_modelo:dataToSend['model_type'],staging:dataToSend['staging'],Tipo_Trabajador:dataToSend['workType'],Nuevo:dataToSend['is_new'],Liviano:dataToSend['lightweight'],Nacionalidad:dataToSend['nationality'],Plazo:dataToSend['term'],Precio_Vehiculo:dataToSend['vehiclePrice'],Total_Financiar:dataToSend['total'],Contado:dataToSend['downPayment'],Total_Ingresos:dataToSend['income'],Retoma:dataToSend['tradeInCarValue'],Valor_Cuota:dataToSend['monthlyPayment'],Anios_Permanencia_Emppleo_Anterior:dataToSend['workEntryDate'],Fecha_Ingreso_Empleo:dataToSend['workStartDate']});cov_2790s8luu9().s[6]++;try{const response=(cov_2790s8luu9().s[7]++,await axios({method:'post',url:WIC_BASE_URL,data:nMapped,headers:{Authorization:`Bearer ${WIC_TOKEN}`,'Content-Type':'application/json'}}));let nResponse=(cov_2790s8luu9().s[8]++,[]);cov_2790s8luu9().s[9]++;if(response.status!==200){cov_2790s8luu9().b[0][0]++;cov_2790s8luu9().s[10]++;debugApp(`${__dirname}/WIC::getResponseFromWicApi::ERROR`);cov_2790s8luu9().s[11]++;return{response:nResponse,error:true};}else{cov_2790s8luu9().b[0][1]++;let data=(cov_2790s8luu9().s[12]++,response.data['data']);let codeDisabled=(cov_2790s8luu9().s[13]++,['SCOTIABANK','MUNDOCREDITO']);cov_2790s8luu9().s[14]++;for(var obj of data){cov_2790s8luu9().s[15]++;if(!codeDisabled.includes(obj['EEFF'])){cov_2790s8luu9().b[1][0]++;cov_2790s8luu9().s[16]++;nResponse.push(obj);}else{cov_2790s8luu9().b[1][1]++;}}cov_2790s8luu9().s[17]++;return{response:nResponse,error:false};}}catch(e){cov_2790s8luu9().s[18]++;return{response:e.response.data,error:true};}};cov_2790s8luu9().s[19]++;module.exports={getResponseFromWicApi};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFJlc3BvbnNlRnJvbVdpY0FwaS5qcyJdLCJuYW1lcyI6WyJ4bWwyanMiLCJyZXF1aXJlIiwiYXhpb3MiLCJVU0VfTU9DS19EQVRBIiwiV0lDX0JBU0VfVVJMIiwiV0lDX0NMSUVOVF9JRCIsIldJQ19DTElFTlRfU0VDUkVUIiwiV0lDX1RPS0VOIiwicHJvY2VzcyIsImVudiIsImdldFJlc3BvbnNlRnJvbVdpY0FwaSIsImJvZHkiLCJkYXRhVG9TZW5kIiwibk1hcHBlZCIsInRpcG9fbW9kZWxvIiwic3RhZ2luZyIsIlRpcG9fVHJhYmFqYWRvciIsIk51ZXZvIiwiTGl2aWFubyIsIk5hY2lvbmFsaWRhZCIsIlBsYXpvIiwiUHJlY2lvX1ZlaGljdWxvIiwiVG90YWxfRmluYW5jaWFyIiwiQ29udGFkbyIsIlRvdGFsX0luZ3Jlc29zIiwiUmV0b21hIiwiVmFsb3JfQ3VvdGEiLCJBbmlvc19QZXJtYW5lbmNpYV9FbXBwbGVvX0FudGVyaW9yIiwiRmVjaGFfSW5ncmVzb19FbXBsZW8iLCJyZXNwb25zZSIsIm1ldGhvZCIsInVybCIsImRhdGEiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsIm5SZXNwb25zZSIsInN0YXR1cyIsImRlYnVnQXBwIiwiX19kaXJuYW1lIiwiZXJyb3IiLCJjb2RlRGlzYWJsZWQiLCJvYmoiLCJpbmNsdWRlcyIsInB1c2giLCJlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ims2RUFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFWLENBQVosQ0FDQSxLQUFNQyxDQUFBQSxLQUFLLDBCQUFHRCxPQUFPLENBQUMsT0FBRCxDQUFWLENBQVgsQ0FFQSxLQUFNLENBQUVFLGFBQUYsQ0FBaUJDLFlBQWpCLENBQStCQyxhQUEvQixDQUE4Q0MsaUJBQTlDLENBQWlFQyxTQUFqRSwyQkFBK0VDLE9BQU8sQ0FBQ0MsR0FBdkYsQ0FBTixDLHdCQUVBLEtBQU1DLENBQUFBLHFCQUFxQixDQUFHLEtBQU9DLENBQUFBLElBQVAsRUFBZ0IseUJBQzVDLEtBQU1DLENBQUFBLFVBQVUsMEJBQUdELElBQUgsQ0FBaEIsQ0FFQSxHQUFJRSxDQUFBQSxPQUFPLDBCQUFHLENBQ1pDLFdBQVcsQ0FBRUYsVUFBVSxDQUFDLFlBQUQsQ0FEWCxDQUVaRyxPQUFPLENBQUVILFVBQVUsQ0FBQyxTQUFELENBRlAsQ0FHWkksZUFBZSxDQUFFSixVQUFVLENBQUMsVUFBRCxDQUhmLENBSVpLLEtBQUssQ0FBRUwsVUFBVSxDQUFDLFFBQUQsQ0FKTCxDQUtaTSxPQUFPLENBQUVOLFVBQVUsQ0FBQyxhQUFELENBTFAsQ0FNWk8sWUFBWSxDQUFFUCxVQUFVLENBQUMsYUFBRCxDQU5aLENBT1pRLEtBQUssQ0FBRVIsVUFBVSxDQUFDLE1BQUQsQ0FQTCxDQVFaUyxlQUFlLENBQUVULFVBQVUsQ0FBQyxjQUFELENBUmYsQ0FTWlUsZUFBZSxDQUFFVixVQUFVLENBQUMsT0FBRCxDQVRmLENBVVpXLE9BQU8sQ0FBRVgsVUFBVSxDQUFDLGFBQUQsQ0FWUCxDQVdaWSxjQUFjLENBQUVaLFVBQVUsQ0FBQyxRQUFELENBWGQsQ0FZWmEsTUFBTSxDQUFFYixVQUFVLENBQUMsaUJBQUQsQ0FaTixDQWFaYyxXQUFXLENBQUVkLFVBQVUsQ0FBQyxnQkFBRCxDQWJYLENBY1plLGtDQUFrQyxDQUFFZixVQUFVLENBQUMsZUFBRCxDQWRsQyxDQWVaZ0Isb0JBQW9CLENBQUVoQixVQUFVLENBQUMsZUFBRCxDQWZwQixDQUFILENBQVgsQ0FINEMsd0JBb0I1QyxHQUFHLENBQ0csS0FBTWlCLENBQUFBLFFBQVEsMEJBQUcsS0FBTTNCLENBQUFBLEtBQUssQ0FBQyxDQUN6QjRCLE1BQU0sQ0FBRSxNQURpQixDQUV6QkMsR0FBRyxDQUFFM0IsWUFGb0IsQ0FHekI0QixJQUFJLENBQUVuQixPQUhtQixDQUl6Qm9CLE9BQU8sQ0FBRSxDQUFFQyxhQUFhLENBQUcsVUFBUzNCLFNBQVUsRUFBckMsQ0FBd0MsZUFBZ0Isa0JBQXhELENBSmdCLENBQUQsQ0FBZCxDQUFkLENBT0EsR0FBSTRCLENBQUFBLFNBQVMsMEJBQUcsRUFBSCxDQUFiLENBUkgsd0JBU0csR0FBSU4sUUFBUSxDQUFDTyxNQUFULEdBQW9CLEdBQXhCLENBQTZCLHFEQUN6QkMsUUFBUSxDQUFFLEdBQUVDLFNBQVUsb0NBQWQsQ0FBUixDQUR5Qix5QkFFekIsTUFBTyxDQUFFVCxRQUFRLENBQUVNLFNBQVosQ0FBdUJJLEtBQUssQ0FBRSxJQUE5QixDQUFQLENBQ0gsQ0FIRCxJQUdPLDRCQUNILEdBQUlQLENBQUFBLElBQUksMkJBQUdILFFBQVEsQ0FBQ0csSUFBVCxDQUFjLE1BQWQsQ0FBSCxDQUFSLENBQ0EsR0FBSVEsQ0FBQUEsWUFBWSwyQkFBRyxDQUFDLFlBQUQsQ0FBZSxjQUFmLENBQUgsQ0FBaEIsQ0FGRyx5QkFHSCxJQUFLLEdBQUlDLENBQUFBLEdBQVQsR0FBZ0JULENBQUFBLElBQWhCLENBQXNCLDBCQUNsQixHQUFJLENBQUNRLFlBQVksQ0FBQ0UsUUFBYixDQUFzQkQsR0FBRyxDQUFDLE1BQUQsQ0FBekIsQ0FBTCxDQUF5QyxxREFBQU4sU0FBUyxDQUFDUSxJQUFWLENBQWVGLEdBQWYsRUFBb0IsQ0FBN0QsaUNBQ0gsQ0FMRSx5QkFNSCxNQUFPLENBQUVaLFFBQVEsQ0FBRU0sU0FBWixDQUF1QkksS0FBSyxDQUFDLEtBQTdCLENBQVAsQ0FDSCxDQUVKLE9BQU9LLENBQVAsQ0FBVSwwQkFDUCxNQUFPLENBQUVmLFFBQVEsQ0FBRWUsQ0FBQyxDQUFDZixRQUFGLENBQVdHLElBQXZCLENBQTZCTyxLQUFLLENBQUMsSUFBbkMsQ0FBUCxDQUNILENBQ0osQ0E1Q0QsQyx5QkE2Q0FNLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNmcEMscUJBRGUsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB4bWwyanMgPSByZXF1aXJlKCd4bWwyanMnKTtcclxuY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xyXG5cclxuY29uc3QgeyBVU0VfTU9DS19EQVRBLCBXSUNfQkFTRV9VUkwsIFdJQ19DTElFTlRfSUQsIFdJQ19DTElFTlRfU0VDUkVULCBXSUNfVE9LRU4gfSA9IHByb2Nlc3MuZW52O1xyXG5cclxuY29uc3QgZ2V0UmVzcG9uc2VGcm9tV2ljQXBpID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICBjb25zdCBkYXRhVG9TZW5kID0gYm9keTtcclxuXHJcbiAgbGV0IG5NYXBwZWQgPSB7XHJcbiAgICB0aXBvX21vZGVsbzogZGF0YVRvU2VuZFsnbW9kZWxfdHlwZSddLFxyXG4gICAgc3RhZ2luZzogZGF0YVRvU2VuZFsnc3RhZ2luZyddLFxyXG4gICAgVGlwb19UcmFiYWphZG9yOiBkYXRhVG9TZW5kWyd3b3JrVHlwZSddLFxyXG4gICAgTnVldm86IGRhdGFUb1NlbmRbJ2lzX25ldyddLFxyXG4gICAgTGl2aWFubzogZGF0YVRvU2VuZFsnbGlnaHR3ZWlnaHQnXSxcclxuICAgIE5hY2lvbmFsaWRhZDogZGF0YVRvU2VuZFsnbmF0aW9uYWxpdHknXSxcclxuICAgIFBsYXpvOiBkYXRhVG9TZW5kWyd0ZXJtJ10sXHJcbiAgICBQcmVjaW9fVmVoaWN1bG86IGRhdGFUb1NlbmRbJ3ZlaGljbGVQcmljZSddLFxyXG4gICAgVG90YWxfRmluYW5jaWFyOiBkYXRhVG9TZW5kWyd0b3RhbCddLFxyXG4gICAgQ29udGFkbzogZGF0YVRvU2VuZFsnZG93blBheW1lbnQnXSxcclxuICAgIFRvdGFsX0luZ3Jlc29zOiBkYXRhVG9TZW5kWydpbmNvbWUnXSxcclxuICAgIFJldG9tYTogZGF0YVRvU2VuZFsndHJhZGVJbkNhclZhbHVlJ10sXHJcbiAgICBWYWxvcl9DdW90YTogZGF0YVRvU2VuZFsnbW9udGhseVBheW1lbnQnXSxcclxuICAgIEFuaW9zX1Blcm1hbmVuY2lhX0VtcHBsZW9fQW50ZXJpb3I6IGRhdGFUb1NlbmRbJ3dvcmtFbnRyeURhdGUnXSxcclxuICAgIEZlY2hhX0luZ3Jlc29fRW1wbGVvOiBkYXRhVG9TZW5kWyd3b3JrU3RhcnREYXRlJ10sXHJcbiAgfTtcclxuICB0cnl7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcyh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICAgICAgICB1cmw6IFdJQ19CQVNFX1VSTCxcclxuICAgICAgICAgICAgZGF0YTogbk1hcHBlZCxcclxuICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7V0lDX1RPS0VOfWAsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICB9KTtcclxuICAgXHJcbiAgICAgICAgbGV0IG5SZXNwb25zZSA9IFtdO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xyXG4gICAgICAgICAgICBkZWJ1Z0FwcChgJHtfX2Rpcm5hbWV9L1dJQzo6Z2V0UmVzcG9uc2VGcm9tV2ljQXBpOjpFUlJPUmApO1xyXG4gICAgICAgICAgICByZXR1cm4geyByZXNwb25zZTogblJlc3BvbnNlLCBlcnJvcjogdHJ1ZX07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhWydkYXRhJ107XHJcbiAgICAgICAgICAgIGxldCBjb2RlRGlzYWJsZWQgPSBbJ1NDT1RJQUJBTksnLCAnTVVORE9DUkVESVRPJ107XHJcbiAgICAgICAgICAgIGZvciAodmFyIG9iaiBvZiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvZGVEaXNhYmxlZC5pbmNsdWRlcyhvYmpbJ0VFRkYnXSkpIG5SZXNwb25zZS5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHsgcmVzcG9uc2U6IG5SZXNwb25zZSwgZXJyb3I6ZmFsc2V9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9Y2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4geyByZXNwb25zZTogZS5yZXNwb25zZS5kYXRhLCBlcnJvcjp0cnVlfTtcclxuICAgIH1cclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgZ2V0UmVzcG9uc2VGcm9tV2ljQXBpLFxyXG59O1xyXG4iXX0=