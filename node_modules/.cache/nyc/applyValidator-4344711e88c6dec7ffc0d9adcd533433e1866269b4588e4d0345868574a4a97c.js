function cov_1cchn9ck8k(){var path="/vagrant/continuum/core/src/modules/pre-evaluation/middlewares/default/applyValidator.js";var hash="7426825870b54e61fae81ecf4f43eedf1a455279";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/modules/pre-evaluation/middlewares/default/applyValidator.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:26}},"1":{start:{line:2,column:16},end:{line:2,column:41}},"2":{start:{line:3,column:34},end:{line:3,column:67}},"3":{start:{line:5,column:0},end:{line:40,column:2}},"4":{start:{line:5,column:35},end:{line:40,column:1}},"5":{start:{line:6,column:20},end:{line:28,column:4}},"6":{start:{line:30,column:17},end:{line:30,column:20}},"7":{start:{line:31,column:2},end:{line:33,column:3}},"8":{start:{line:32,column:4},end:{line:32,column:68}},"9":{start:{line:35,column:27},end:{line:35,column:67}},"10":{start:{line:36,column:2},end:{line:38,column:3}},"11":{start:{line:37,column:4},end:{line:37,column:68}},"12":{start:{line:39,column:2},end:{line:39,column:16}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:35},end:{line:40,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:35},end:{line:5,column:36}},loc:{start:{line:5,column:61},end:{line:40,column:1}},line:5}},branchMap:{"0":{loc:{start:{line:31,column:2},end:{line:33,column:3}},type:"if",locations:[{start:{line:31,column:2},end:{line:33,column:3}},{start:{line:31,column:2},end:{line:33,column:3}}],line:31},"1":{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:36,column:2},end:{line:38,column:3}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7426825870b54e61fae81ecf4f43eedf1a455279"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1cchn9ck8k=function(){return actualCoverage;};}return actualCoverage;}cov_1cchn9ck8k();const Joi=(cov_1cchn9ck8k().s[0]++,require('joi'));const helpers=(cov_1cchn9ck8k().s[1]++,require('common/helpers'));const{RestException,errors}=(cov_1cchn9ck8k().s[2]++,require('modules/rest.exception'));cov_1cchn9ck8k().s[3]++;module.exports=dependencies=>{cov_1cchn9ck8k().f[0]++;cov_1cchn9ck8k().s[4]++;return async(req,res,next)=>{cov_1cchn9ck8k().f[1]++;const validator=(cov_1cchn9ck8k().s[5]++,Joi.object({channel:Joi.string().required(),rut:Joi.string().regex(/^\d{1,2}(\.)?\d{3}(\.)?\d{3}[-][0-9kK]{1}$/).required(),income:Joi.number(),vehiclePrice:Joi.number().required(),vehicleYear:Joi.number().required(),vehicleType:Joi.string().required(),monthlyPayment:Joi.number().required(),term:Joi.number().required(),//plazo
downPayment:Joi.number().required(),//pie
nationality:Joi.string().required(),workType:Joi.string().required(),workEntryDate:Joi.number().required(),//workEntryDate
tradeInCarValue:Joi.number().required(),brandName:Joi.string(),lastname:Joi.string(),phone:Joi.string().max(9),email:Joi.string().required().email({tlds:{allow:false}})}));const{body}=(cov_1cchn9ck8k().s[6]++,req);cov_1cchn9ck8k().s[7]++;if(!body.term in[12,24,36,48,60]){cov_1cchn9ck8k().b[0][0]++;cov_1cchn9ck8k().s[8]++;throw new RestException(errors.ERROR_VALIDATION,error.details);}else{cov_1cchn9ck8k().b[0][1]++;}const{error,value}=(cov_1cchn9ck8k().s[9]++,helpers.validatePayload(validator,body));cov_1cchn9ck8k().s[10]++;if(error){cov_1cchn9ck8k().b[1][0]++;cov_1cchn9ck8k().s[11]++;throw new RestException(errors.ERROR_VALIDATION,error.details);}else{cov_1cchn9ck8k().b[1][1]++;}cov_1cchn9ck8k().s[12]++;return next();};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGx5VmFsaWRhdG9yLmpzIl0sIm5hbWVzIjpbIkpvaSIsInJlcXVpcmUiLCJoZWxwZXJzIiwiUmVzdEV4Y2VwdGlvbiIsImVycm9ycyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZXBlbmRlbmNpZXMiLCJyZXEiLCJyZXMiLCJuZXh0IiwidmFsaWRhdG9yIiwib2JqZWN0IiwiY2hhbm5lbCIsInN0cmluZyIsInJlcXVpcmVkIiwicnV0IiwicmVnZXgiLCJpbmNvbWUiLCJudW1iZXIiLCJ2ZWhpY2xlUHJpY2UiLCJ2ZWhpY2xlWWVhciIsInZlaGljbGVUeXBlIiwibW9udGhseVBheW1lbnQiLCJ0ZXJtIiwiZG93blBheW1lbnQiLCJuYXRpb25hbGl0eSIsIndvcmtUeXBlIiwid29ya0VudHJ5RGF0ZSIsInRyYWRlSW5DYXJWYWx1ZSIsImJyYW5kTmFtZSIsImxhc3RuYW1lIiwicGhvbmUiLCJtYXgiLCJlbWFpbCIsInRsZHMiLCJhbGxvdyIsImJvZHkiLCJFUlJPUl9WQUxJREFUSU9OIiwiZXJyb3IiLCJkZXRhaWxzIiwidmFsdWUiLCJ2YWxpZGF0ZVBheWxvYWQiXSwibWFwcGluZ3MiOiI0bUVBZVk7MkZBZlosS0FBTUEsQ0FBQUEsR0FBRywwQkFBR0MsT0FBTyxDQUFDLEtBQUQsQ0FBVixDQUFULENBQ0EsS0FBTUMsQ0FBQUEsT0FBTywwQkFBR0QsT0FBTyxDQUFDLGdCQUFELENBQVYsQ0FBYixDQUNBLEtBQU0sQ0FBRUUsYUFBRixDQUFpQkMsTUFBakIsMkJBQTRCSCxPQUFPLENBQUMsd0JBQUQsQ0FBbkMsQ0FBTixDLHdCQUVBSSxNQUFNLENBQUNDLE9BQVAsQ0FBa0JDLFlBQUQsRUFBa0IsOERBQU9DLEdBQVAsQ0FBWUMsR0FBWixDQUFpQkMsSUFBakIsR0FBMEIseUJBQzNELEtBQU1DLENBQUFBLFNBQVMsMEJBQUdYLEdBQUcsQ0FBQ1ksTUFBSixDQUFXLENBQzNCQyxPQUFPLENBQUViLEdBQUcsQ0FBQ2MsTUFBSixHQUFhQyxRQUFiLEVBRGtCLENBRTNCQyxHQUFHLENBQUVoQixHQUFHLENBQUNjLE1BQUosR0FDRkcsS0FERSxDQUNJLDRDQURKLEVBRUZGLFFBRkUsRUFGc0IsQ0FLM0JHLE1BQU0sQ0FBRWxCLEdBQUcsQ0FBQ21CLE1BQUosRUFMbUIsQ0FNM0JDLFlBQVksQ0FBRXBCLEdBQUcsQ0FBQ21CLE1BQUosR0FBYUosUUFBYixFQU5hLENBTzNCTSxXQUFXLENBQUVyQixHQUFHLENBQUNtQixNQUFKLEdBQWFKLFFBQWIsRUFQYyxDQVEzQk8sV0FBVyxDQUFFdEIsR0FBRyxDQUFDYyxNQUFKLEdBQWFDLFFBQWIsRUFSYyxDQVMzQlEsY0FBYyxDQUFFdkIsR0FBRyxDQUFDbUIsTUFBSixHQUFhSixRQUFiLEVBVFcsQ0FVM0JTLElBQUksQ0FBRXhCLEdBQUcsQ0FBQ21CLE1BQUosR0FBYUosUUFBYixFQVZxQixDQVVJO0FBQy9CVSxXQUFXLENBQUV6QixHQUFHLENBQUNtQixNQUFKLEdBQWFKLFFBQWIsRUFYYyxDQVdXO0FBQ3RDVyxXQUFXLENBQUUxQixHQUFHLENBQUNjLE1BQUosR0FBYUMsUUFBYixFQVpjLENBYTNCWSxRQUFRLENBQUUzQixHQUFHLENBQUNjLE1BQUosR0FBYUMsUUFBYixFQWJpQixDQWMzQmEsYUFBYSxDQUFFNUIsR0FBRyxDQUFDbUIsTUFBSixHQUFhSixRQUFiLEVBZFksQ0FjYTtBQUN4Q2MsZUFBZSxDQUFFN0IsR0FBRyxDQUFDbUIsTUFBSixHQUFhSixRQUFiLEVBZlUsQ0FnQjNCZSxTQUFTLENBQUU5QixHQUFHLENBQUNjLE1BQUosRUFoQmdCLENBaUIzQmlCLFFBQVEsQ0FBRS9CLEdBQUcsQ0FBQ2MsTUFBSixFQWpCaUIsQ0FrQjNCa0IsS0FBSyxDQUFFaEMsR0FBRyxDQUFDYyxNQUFKLEdBQWFtQixHQUFiLENBQWlCLENBQWpCLENBbEJvQixDQW1CM0JDLEtBQUssQ0FBRWxDLEdBQUcsQ0FBQ2MsTUFBSixHQUNKQyxRQURJLEdBRUptQixLQUZJLENBRUUsQ0FBRUMsSUFBSSxDQUFFLENBQUVDLEtBQUssQ0FBRSxLQUFULENBQVIsQ0FGRixDQW5Cb0IsQ0FBWCxDQUFILENBQWYsQ0F3QkEsS0FBTSxDQUFDQyxJQUFELDJCQUFTN0IsR0FBVCxDQUFOLENBekIyRCx3QkEwQjNELEdBQUcsQ0FBQzZCLElBQUksQ0FBQ2IsSUFBTixHQUFjLENBQUMsRUFBRCxDQUFLLEVBQUwsQ0FBUyxFQUFULENBQWEsRUFBYixDQUFrQixFQUFsQixDQUFqQixDQUF1QyxvREFDckMsS0FBTSxJQUFJckIsQ0FBQUEsYUFBSixDQUFrQkMsTUFBTSxDQUFDa0MsZ0JBQXpCLENBQTJDQyxLQUFLLENBQUNDLE9BQWpELENBQU4sQ0FDRCxDQUZELGlDQUlBLEtBQU0sQ0FBRUQsS0FBRixDQUFTRSxLQUFULDJCQUFtQnZDLE9BQU8sQ0FBQ3dDLGVBQVIsQ0FBd0IvQixTQUF4QixDQUFtQzBCLElBQW5DLENBQW5CLENBQU4sQ0E5QjJELHlCQStCM0QsR0FBSUUsS0FBSixDQUFXLHFEQUNULEtBQU0sSUFBSXBDLENBQUFBLGFBQUosQ0FBa0JDLE1BQU0sQ0FBQ2tDLGdCQUF6QixDQUEyQ0MsS0FBSyxDQUFDQyxPQUFqRCxDQUFOLENBQ0QsQ0FGRCxpQ0EvQjJELHlCQWtDM0QsTUFBTzlCLENBQUFBLElBQUksRUFBWCxDQUNELENBbkNrQyxDQW1DbEMsQ0FuQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKb2kgPSByZXF1aXJlKCdqb2knKTtcclxuY29uc3QgaGVscGVycyA9IHJlcXVpcmUoJ2NvbW1vbi9oZWxwZXJzJyk7XHJcbmNvbnN0IHsgUmVzdEV4Y2VwdGlvbiwgZXJyb3JzIH0gPSByZXF1aXJlKCdtb2R1bGVzL3Jlc3QuZXhjZXB0aW9uJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IChkZXBlbmRlbmNpZXMpID0+IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGNvbnN0IHZhbGlkYXRvciA9IEpvaS5vYmplY3Qoe1xyXG4gICAgY2hhbm5lbDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXHJcbiAgICBydXQ6IEpvaS5zdHJpbmcoKVxyXG4gICAgICAucmVnZXgoL15cXGR7MSwyfShcXC4pP1xcZHszfShcXC4pP1xcZHszfVstXVswLTlrS117MX0kLylcclxuICAgICAgLnJlcXVpcmVkKCksXHJcbiAgICBpbmNvbWU6IEpvaS5udW1iZXIoKSxcclxuICAgIHZlaGljbGVQcmljZTogSm9pLm51bWJlcigpLnJlcXVpcmVkKCksXHJcbiAgICB2ZWhpY2xlWWVhcjogSm9pLm51bWJlcigpLnJlcXVpcmVkKCksXHJcbiAgICB2ZWhpY2xlVHlwZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXHJcbiAgICBtb250aGx5UGF5bWVudDogSm9pLm51bWJlcigpLnJlcXVpcmVkKCksXHJcbiAgICB0ZXJtOiBKb2kubnVtYmVyKCkucmVxdWlyZWQoKSwgLy9wbGF6b1xyXG4gICAgZG93blBheW1lbnQ6IEpvaS5udW1iZXIoKS5yZXF1aXJlZCgpLCAvL3BpZVxyXG4gICAgbmF0aW9uYWxpdHk6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxyXG4gICAgd29ya1R5cGU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxyXG4gICAgd29ya0VudHJ5RGF0ZTogSm9pLm51bWJlcigpLnJlcXVpcmVkKCksIC8vd29ya0VudHJ5RGF0ZVxyXG4gICAgdHJhZGVJbkNhclZhbHVlOiBKb2kubnVtYmVyKCkucmVxdWlyZWQoKSxcclxuICAgIGJyYW5kTmFtZTogSm9pLnN0cmluZygpLFxyXG4gICAgbGFzdG5hbWU6IEpvaS5zdHJpbmcoKSxcclxuICAgIHBob25lOiBKb2kuc3RyaW5nKCkubWF4KDkpLFxyXG4gICAgZW1haWw6IEpvaS5zdHJpbmcoKVxyXG4gICAgICAucmVxdWlyZWQoKVxyXG4gICAgICAuZW1haWwoeyB0bGRzOiB7IGFsbG93OiBmYWxzZSB9IH0pLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCB7Ym9keX0gPSByZXE7XHJcbiAgaWYoIWJvZHkudGVybSBpbiBbMTIsIDI0LCAzNiwgNDggLCA2MF0pe1xyXG4gICAgdGhyb3cgbmV3IFJlc3RFeGNlcHRpb24oZXJyb3JzLkVSUk9SX1ZBTElEQVRJT04sIGVycm9yLmRldGFpbHMpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBlcnJvciwgdmFsdWUgfSA9IGhlbHBlcnMudmFsaWRhdGVQYXlsb2FkKHZhbGlkYXRvciwgYm9keSk7XHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgUmVzdEV4Y2VwdGlvbihlcnJvcnMuRVJST1JfVkFMSURBVElPTiwgZXJyb3IuZGV0YWlscyk7XHJcbiAgfVxyXG4gIHJldHVybiBuZXh0KCk7XHJcbn07XHJcbiJdfQ==