function cov_rf1dsapxk(){var path="/vagrant/continuum/core/src/modules/evaluation/middlewares/chl/v1/rules/getRules.js";var hash="cbaacab2c659ef9ed4def0290e56999b9928db2d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/modules/evaluation/middlewares/chl/v1/rules/getRules.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:76}},"1":{start:{line:5,column:20},end:{line:5,column:85}},"2":{start:{line:7,column:23},end:{line:21,column:1}},"3":{start:{line:23,column:24},end:{line:34,column:1}},"4":{start:{line:24,column:2},end:{line:26,column:3}},"5":{start:{line:25,column:4},end:{line:25,column:64}},"6":{start:{line:27,column:26},end:{line:29,column:3}},"7":{start:{line:28,column:23},end:{line:28,column:79}},"8":{start:{line:30,column:2},end:{line:32,column:3}},"9":{start:{line:31,column:4},end:{line:31,column:30}},"10":{start:{line:33,column:2},end:{line:33,column:12}},"11":{start:{line:36,column:20},end:{line:43,column:1}},"12":{start:{line:37,column:2},end:{line:39,column:3}},"13":{start:{line:38,column:4},end:{line:38,column:16}},"14":{start:{line:40,column:18},end:{line:40,column:101}},"15":{start:{line:40,column:52},end:{line:40,column:100}},"16":{start:{line:41,column:2},end:{line:41,column:35}},"17":{start:{line:41,column:13},end:{line:41,column:35}},"18":{start:{line:42,column:2},end:{line:42,column:14}},"19":{start:{line:45,column:23},end:{line:48,column:1}},"20":{start:{line:46,column:2},end:{line:46,column:50}},"21":{start:{line:46,column:39},end:{line:46,column:50}},"22":{start:{line:47,column:2},end:{line:47,column:82}},"23":{start:{line:50,column:23},end:{line:59,column:1}},"24":{start:{line:51,column:33},end:{line:51,column:56}},"25":{start:{line:52,column:2},end:{line:58,column:4}},"26":{start:{line:61,column:28},end:{line:63,column:1}},"27":{start:{line:62,column:2},end:{line:62,column:109}},"28":{start:{line:65,column:17},end:{line:86,column:1}},"29":{start:{line:66,column:34},end:{line:66,column:75}},"30":{start:{line:68,column:27},end:{line:68,column:77}},"31":{start:{line:70,column:13},end:{line:70,column:18}},"32":{start:{line:71,column:2},end:{line:83,column:3}},"33":{start:{line:73,column:17},end:{line:73,column:56}},"34":{start:{line:74,column:32},end:{line:76,column:5}},"35":{start:{line:77,column:4},end:{line:77,column:70}},"36":{start:{line:78,column:4},end:{line:80,column:5}},"37":{start:{line:79,column:6},end:{line:79,column:21}},"38":{start:{line:82,column:4},end:{line:82,column:21}},"39":{start:{line:85,column:2},end:{line:85,column:61}},"40":{start:{line:87,column:21},end:{line:103,column:1}},"41":{start:{line:87,column:46},end:{line:103,column:1}},"42":{start:{line:88,column:62},end:{line:88,column:100}},"43":{start:{line:90,column:2},end:{line:102,column:5}},"44":{start:{line:104,column:0},end:{line:107,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:23,column:24},end:{line:23,column:25}},loc:{start:{line:23,column:48},end:{line:34,column:1}},line:23},"1":{name:"(anonymous_1)",decl:{start:{line:28,column:4},end:{line:28,column:5}},loc:{start:{line:28,column:23},end:{line:28,column:79}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:36,column:20},end:{line:36,column:21}},loc:{start:{line:36,column:44},end:{line:43,column:1}},line:36},"3":{name:"(anonymous_3)",decl:{start:{line:40,column:40},end:{line:40,column:41}},loc:{start:{line:40,column:52},end:{line:40,column:100}},line:40},"4":{name:"(anonymous_4)",decl:{start:{line:45,column:23},end:{line:45,column:24}},loc:{start:{line:45,column:47},end:{line:48,column:1}},line:45},"5":{name:"(anonymous_5)",decl:{start:{line:50,column:23},end:{line:50,column:24}},loc:{start:{line:50,column:52},end:{line:59,column:1}},line:50},"6":{name:"(anonymous_6)",decl:{start:{line:61,column:28},end:{line:61,column:29}},loc:{start:{line:61,column:63},end:{line:63,column:1}},line:61},"7":{name:"(anonymous_7)",decl:{start:{line:65,column:17},end:{line:65,column:18}},loc:{start:{line:65,column:47},end:{line:86,column:1}},line:65},"8":{name:"(anonymous_8)",decl:{start:{line:87,column:21},end:{line:87,column:22}},loc:{start:{line:87,column:46},end:{line:103,column:1}},line:87},"9":{name:"(anonymous_9)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:72},end:{line:103,column:1}},line:87}},branchMap:{"0":{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:24,column:2},end:{line:26,column:3}}],line:24},"1":{loc:{start:{line:30,column:2},end:{line:32,column:3}},type:"if",locations:[{start:{line:30,column:2},end:{line:32,column:3}},{start:{line:30,column:2},end:{line:32,column:3}}],line:30},"2":{loc:{start:{line:37,column:2},end:{line:39,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:39,column:3}},{start:{line:37,column:2},end:{line:39,column:3}}],line:37},"3":{loc:{start:{line:41,column:2},end:{line:41,column:35}},type:"if",locations:[{start:{line:41,column:2},end:{line:41,column:35}},{start:{line:41,column:2},end:{line:41,column:35}}],line:41},"4":{loc:{start:{line:46,column:2},end:{line:46,column:50}},type:"if",locations:[{start:{line:46,column:2},end:{line:46,column:50}},{start:{line:46,column:2},end:{line:46,column:50}}],line:46},"5":{loc:{start:{line:47,column:9},end:{line:47,column:81}},type:"cond-expr",locations:[{start:{line:47,column:64},end:{line:47,column:71}},{start:{line:47,column:74},end:{line:47,column:81}}],line:47},"6":{loc:{start:{line:62,column:9},end:{line:62,column:108}},type:"cond-expr",locations:[{start:{line:62,column:85},end:{line:62,column:95}},{start:{line:62,column:98},end:{line:62,column:108}}],line:62},"7":{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:78,column:4},end:{line:80,column:5}}],line:78}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cbaacab2c659ef9ed4def0290e56999b9928db2d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_rf1dsapxk=function(){return actualCoverage;};}return actualCoverage;}cov_rf1dsapxk();const{evaluateRequest,evaluateEquifaxAndCustomerDataEligibilityForLoan}=(cov_rf1dsapxk().s[0]++,require('modules/evaluation/middlewares/chl/v1/rules/fn/decisionEngine'));const{newLead}=(cov_rf1dsapxk().s[1]++,require('modules/evaluation/middlewares/chl/v1/leads/fn/newLead'));const importerBrands=(cov_rf1dsapxk().s[2]++,[{name:'BAIC',code:801,importer:'79649140K'},{name:'BRILLIANCE',code:803,importer:'79649140K'},{name:'CHANGAN',code:805,importer:'829957000'},{name:'GEELY',code:818,importer:'79649140K'},{name:'GREATWALL',code:819,importer:'829957000'},{name:'HAVAL',code:821,importer:'829957000'},{name:'HYUNDAI',code:823,importer:'79649140K'},{name:'JAC',code:824,importer:'829957000'},{name:'MAHINDRA',code:829,importer:'79649140K'},{name:'MAZDA',code:830,importer:'829957000'},{name:'MINI',code:833,importer:'79649140K'},{name:'RENAULT',code:838,importer:'829957000'},{name:'SUZUKI',code:843,importer:'829957000'}]);cov_rf1dsapxk().s[3]++;const getCarBrandName=rawCustomerRequest=>{cov_rf1dsapxk().f[0]++;cov_rf1dsapxk().s[4]++;if(rawCustomerRequest.marcaVehiculoNombre){cov_rf1dsapxk().b[0][0]++;cov_rf1dsapxk().s[5]++;return rawCustomerRequest.marcaVehiculoNombre.toUpperCase();}else{cov_rf1dsapxk().b[0][1]++;}const[filteredBrand]=(cov_rf1dsapxk().s[6]++,importerBrands.filter(importerBrand=>{cov_rf1dsapxk().f[1]++;cov_rf1dsapxk().s[7]++;return+rawCustomerRequest.marcaVehiculo===importerBrand.code;}));cov_rf1dsapxk().s[8]++;if(filteredBrand){cov_rf1dsapxk().b[1][0]++;cov_rf1dsapxk().s[9]++;return filteredBrand.name;}else{cov_rf1dsapxk().b[1][1]++;}cov_rf1dsapxk().s[10]++;return'';};cov_rf1dsapxk().s[11]++;const getImporter=rawCustomerRequest=>{cov_rf1dsapxk().f[2]++;cov_rf1dsapxk().s[12]++;if(!rawCustomerRequest.marcaVehiculo){cov_rf1dsapxk().b[2][0]++;cov_rf1dsapxk().s[13]++;return null;}else{cov_rf1dsapxk().b[2][1]++;}const[brand]=(cov_rf1dsapxk().s[14]++,importerBrands.filter(brands=>{cov_rf1dsapxk().f[3]++;cov_rf1dsapxk().s[15]++;return brands.code===rawCustomerRequest.marcaVehiculo;}));cov_rf1dsapxk().s[16]++;if(brand){cov_rf1dsapxk().b[3][0]++;cov_rf1dsapxk().s[17]++;return brand.importer;}else{cov_rf1dsapxk().b[3][1]++;}cov_rf1dsapxk().s[18]++;return null;};cov_rf1dsapxk().s[19]++;const getVehicleType=rawCustomerRequest=>{cov_rf1dsapxk().f[4]++;cov_rf1dsapxk().s[20]++;if(!rawCustomerRequest.vehicleType){cov_rf1dsapxk().b[4][0]++;cov_rf1dsapxk().s[21]++;return'X';}else{cov_rf1dsapxk().b[4][1]++;}cov_rf1dsapxk().s[22]++;return rawCustomerRequest.vehicleType.toUpperCase()==='U'?(cov_rf1dsapxk().b[5][0]++,'USADO'):(cov_rf1dsapxk().b[5][1]++,'NUEVO');};cov_rf1dsapxk().s[23]++;const prepareNewLead=AmicarsEvaluationRecord=>{cov_rf1dsapxk().f[5]++;const{rawCustomerRequest}=(cov_rf1dsapxk().s[24]++,AmicarsEvaluationRecord);cov_rf1dsapxk().s[25]++;return{...rawCustomerRequest,engine:'AmicarEngine',tipoVehiculo:getVehicleType(rawCustomerRequest),marca:getCarBrandName(rawCustomerRequest),concesionario:getImporter(rawCustomerRequest)};};cov_rf1dsapxk().s[26]++;const getEvaluationResult=async AmicarsEvaluationRecord=>{cov_rf1dsapxk().f[6]++;cov_rf1dsapxk().s[27]++;return evaluateEquifaxAndCustomerDataEligibilityForLoan(AmicarsEvaluationRecord)?(cov_rf1dsapxk().b[6][0]++,'APPROVED'):(cov_rf1dsapxk().b[6][1]++,'REJECTED');};cov_rf1dsapxk().s[28]++;const getRules=async(dependencies,body)=>{cov_rf1dsapxk().f[7]++;const AmicarsEvaluationRecord=(cov_rf1dsapxk().s[29]++,await evaluateRequest(dependencies,body));const evaluationResult=(cov_rf1dsapxk().s[30]++,await getEvaluationResult(AmicarsEvaluationRecord));let lead=(cov_rf1dsapxk().s[31]++,false);cov_rf1dsapxk().s[32]++;try{//send lead
const data=(cov_rf1dsapxk().s[33]++,prepareNewLead(AmicarsEvaluationRecord));const resultadoAprobacion=(cov_rf1dsapxk().s[34]++,{nombreEntidadFinanciera:getEvaluationResult(AmicarsEvaluationRecord)});cov_rf1dsapxk().s[35]++;lead=await newLead({dependencies,data,resultadoAprobacion});cov_rf1dsapxk().s[36]++;if(lead.success){cov_rf1dsapxk().b[7][0]++;cov_rf1dsapxk().s[37]++;lead=lead.id;}else{cov_rf1dsapxk().b[7][1]++;}}catch(err){cov_rf1dsapxk().s[38]++;console.log(err);}cov_rf1dsapxk().s[39]++;return{lead,AmicarsEvaluationRecord,evaluationResult};};cov_rf1dsapxk().s[40]++;const getHttpRules=(dependencies,stage)=>{cov_rf1dsapxk().f[8]++;cov_rf1dsapxk().s[41]++;return async(req,res,next)=>{cov_rf1dsapxk().f[9]++;const{lead,AmicarsEvaluationRecord,evaluationResult}=(cov_rf1dsapxk().s[42]++,await getRules(dependencies,req.body));cov_rf1dsapxk().s[43]++;res.json({result:evaluationResult,lead,evaluation:{ageWithinParameters:AmicarsEvaluationRecord.ageWithinParameters,ratingWithinParameters:AmicarsEvaluationRecord.ratingWithinParameters,minimumIncomeWithinParameters:AmicarsEvaluationRecord.minimumIncomeWithinParameters,minimumSeniorityWithinParameters:AmicarsEvaluationRecord.minimumSeniorityWithinParameters,equifaxScoreWithinParameters:AmicarsEvaluationRecord.equifaxScoreWithinParameters,rciWithinParameters:AmicarsEvaluationRecord.rciWithinParameters,delinquenciesWithinParameters:AmicarsEvaluationRecord.delinquenciesWithinParameters}});};};cov_rf1dsapxk().s[44]++;module.exports={getRules,getHttpRules};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFJ1bGVzLmpzIl0sIm5hbWVzIjpbImV2YWx1YXRlUmVxdWVzdCIsImV2YWx1YXRlRXF1aWZheEFuZEN1c3RvbWVyRGF0YUVsaWdpYmlsaXR5Rm9yTG9hbiIsInJlcXVpcmUiLCJuZXdMZWFkIiwiaW1wb3J0ZXJCcmFuZHMiLCJuYW1lIiwiY29kZSIsImltcG9ydGVyIiwiZ2V0Q2FyQnJhbmROYW1lIiwicmF3Q3VzdG9tZXJSZXF1ZXN0IiwibWFyY2FWZWhpY3Vsb05vbWJyZSIsInRvVXBwZXJDYXNlIiwiZmlsdGVyZWRCcmFuZCIsImZpbHRlciIsImltcG9ydGVyQnJhbmQiLCJtYXJjYVZlaGljdWxvIiwiZ2V0SW1wb3J0ZXIiLCJicmFuZCIsImJyYW5kcyIsImdldFZlaGljbGVUeXBlIiwidmVoaWNsZVR5cGUiLCJwcmVwYXJlTmV3TGVhZCIsIkFtaWNhcnNFdmFsdWF0aW9uUmVjb3JkIiwiZW5naW5lIiwidGlwb1ZlaGljdWxvIiwibWFyY2EiLCJjb25jZXNpb25hcmlvIiwiZ2V0RXZhbHVhdGlvblJlc3VsdCIsImdldFJ1bGVzIiwiZGVwZW5kZW5jaWVzIiwiYm9keSIsImV2YWx1YXRpb25SZXN1bHQiLCJsZWFkIiwiZGF0YSIsInJlc3VsdGFkb0Fwcm9iYWNpb24iLCJub21icmVFbnRpZGFkRmluYW5jaWVyYSIsInN1Y2Nlc3MiLCJpZCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJnZXRIdHRwUnVsZXMiLCJzdGFnZSIsInJlcSIsInJlcyIsIm5leHQiLCJqc29uIiwicmVzdWx0IiwiZXZhbHVhdGlvbiIsImFnZVdpdGhpblBhcmFtZXRlcnMiLCJyYXRpbmdXaXRoaW5QYXJhbWV0ZXJzIiwibWluaW11bUluY29tZVdpdGhpblBhcmFtZXRlcnMiLCJtaW5pbXVtU2VuaW9yaXR5V2l0aGluUGFyYW1ldGVycyIsImVxdWlmYXhTY29yZVdpdGhpblBhcmFtZXRlcnMiLCJyY2lXaXRoaW5QYXJhbWV0ZXJzIiwiZGVsaW5xdWVuY2llc1dpdGhpblBhcmFt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RWMsR0FBRyxDQUFDRSxJQUFKLENBQVMsQ0FDUEMsTUFBTSxDQUFFaEIsZ0JBREQsQ0FFUEMsSUFGTyxDQUdQZ0IsVUFBVSxDQUFFLENBQ1ZDLG1CQUFtQixDQUFFM0IsdUJBQXVCLENBQUMyQixtQkFEbkMsQ0FFVkMsc0JBQXNCLENBQUU1Qix1QkFBdUIsQ0FBQzRCLHNCQUZ0QyxDQUdWQyw2QkFBNkIsQ0FBRTdCLHVCQUF1QixDQUFDNkIsNkJBSDdDLENBSVZDLGdDQUFnQyxDQUFFOUIsdUJBQXVCLENBQUM4QixnQ0FKaEQsQ0FLVkMsNEJBQTRCLENBQUUvQix1QkFBdUIsQ0FBQytCLDRCQUw1QyxDQU1WQyxtQkFBbUIsQ0FBRWhDLHVCQUF1QixDQUFDZ0MsbUJBTm5DLENBT1ZDLDZCQUE2QixDQUFFakMsdUJBQXVCLENBQUNpQyw2QkFQN0MsQ0FITCxDQUFULEVBYUQsQ0FoQjZDLENBZ0I3QyxDQWhCRCxDLHdCQWlCQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2Y3QixRQURlLENBRWZhLFlBRmUsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XHJcbiAgZXZhbHVhdGVSZXF1ZXN0LFxyXG4gIGV2YWx1YXRlRXF1aWZheEFuZEN1c3RvbWVyRGF0YUVsaWdpYmlsaXR5Rm9yTG9hbixcclxufSA9IHJlcXVpcmUoJ21vZHVsZXMvZXZhbHVhdGlvbi9taWRkbGV3YXJlcy9jaGwvdjEvcnVsZXMvZm4vZGVjaXNpb25FbmdpbmUnKTtcclxuY29uc3QgeyBuZXdMZWFkIH0gPSByZXF1aXJlKCdtb2R1bGVzL2V2YWx1YXRpb24vbWlkZGxld2FyZXMvY2hsL3YxL2xlYWRzL2ZuL25ld0xlYWQnKTtcclxuXHJcbmNvbnN0IGltcG9ydGVyQnJhbmRzID0gW1xyXG4gIHsgbmFtZTogJ0JBSUMnLCBjb2RlOiA4MDEsIGltcG9ydGVyOiAnNzk2NDkxNDBLJyB9LFxyXG4gIHsgbmFtZTogJ0JSSUxMSUFOQ0UnLCBjb2RlOiA4MDMsIGltcG9ydGVyOiAnNzk2NDkxNDBLJyB9LFxyXG4gIHsgbmFtZTogJ0NIQU5HQU4nLCBjb2RlOiA4MDUsIGltcG9ydGVyOiAnODI5OTU3MDAwJyB9LFxyXG4gIHsgbmFtZTogJ0dFRUxZJywgY29kZTogODE4LCBpbXBvcnRlcjogJzc5NjQ5MTQwSycgfSxcclxuICB7IG5hbWU6ICdHUkVBVFdBTEwnLCBjb2RlOiA4MTksIGltcG9ydGVyOiAnODI5OTU3MDAwJyB9LFxyXG4gIHsgbmFtZTogJ0hBVkFMJywgY29kZTogODIxLCBpbXBvcnRlcjogJzgyOTk1NzAwMCcgfSxcclxuICB7IG5hbWU6ICdIWVVOREFJJywgY29kZTogODIzLCBpbXBvcnRlcjogJzc5NjQ5MTQwSycgfSxcclxuICB7IG5hbWU6ICdKQUMnLCBjb2RlOiA4MjQsIGltcG9ydGVyOiAnODI5OTU3MDAwJyB9LFxyXG4gIHsgbmFtZTogJ01BSElORFJBJywgY29kZTogODI5LCBpbXBvcnRlcjogJzc5NjQ5MTQwSycgfSxcclxuICB7IG5hbWU6ICdNQVpEQScsIGNvZGU6IDgzMCwgaW1wb3J0ZXI6ICc4Mjk5NTcwMDAnIH0sXHJcbiAgeyBuYW1lOiAnTUlOSScsIGNvZGU6IDgzMywgaW1wb3J0ZXI6ICc3OTY0OTE0MEsnIH0sXHJcbiAgeyBuYW1lOiAnUkVOQVVMVCcsIGNvZGU6IDgzOCwgaW1wb3J0ZXI6ICc4Mjk5NTcwMDAnIH0sXHJcbiAgeyBuYW1lOiAnU1VaVUtJJywgY29kZTogODQzLCBpbXBvcnRlcjogJzgyOTk1NzAwMCcgfSxcclxuXTtcclxuXHJcbmNvbnN0IGdldENhckJyYW5kTmFtZSA9IChyYXdDdXN0b21lclJlcXVlc3QpID0+IHtcclxuICBpZiAocmF3Q3VzdG9tZXJSZXF1ZXN0Lm1hcmNhVmVoaWN1bG9Ob21icmUpIHtcclxuICAgIHJldHVybiByYXdDdXN0b21lclJlcXVlc3QubWFyY2FWZWhpY3Vsb05vbWJyZS50b1VwcGVyQ2FzZSgpO1xyXG4gIH1cclxuICBjb25zdCBbZmlsdGVyZWRCcmFuZF0gPSBpbXBvcnRlckJyYW5kcy5maWx0ZXIoXHJcbiAgICAoaW1wb3J0ZXJCcmFuZCkgPT4gK3Jhd0N1c3RvbWVyUmVxdWVzdC5tYXJjYVZlaGljdWxvID09PSBpbXBvcnRlckJyYW5kLmNvZGUsXHJcbiAgKTtcclxuICBpZiAoZmlsdGVyZWRCcmFuZCkge1xyXG4gICAgcmV0dXJuIGZpbHRlcmVkQnJhbmQubmFtZTtcclxuICB9XHJcbiAgcmV0dXJuICcnO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0SW1wb3J0ZXIgPSAocmF3Q3VzdG9tZXJSZXF1ZXN0KSA9PiB7XHJcbiAgaWYgKCFyYXdDdXN0b21lclJlcXVlc3QubWFyY2FWZWhpY3Vsbykge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGNvbnN0IFticmFuZF0gPSBpbXBvcnRlckJyYW5kcy5maWx0ZXIoKGJyYW5kcykgPT4gYnJhbmRzLmNvZGUgPT09IHJhd0N1c3RvbWVyUmVxdWVzdC5tYXJjYVZlaGljdWxvKTtcclxuICBpZiAoYnJhbmQpIHJldHVybiBicmFuZC5pbXBvcnRlcjtcclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbmNvbnN0IGdldFZlaGljbGVUeXBlID0gKHJhd0N1c3RvbWVyUmVxdWVzdCkgPT4ge1xyXG4gIGlmICghcmF3Q3VzdG9tZXJSZXF1ZXN0LnZlaGljbGVUeXBlKSByZXR1cm4gJ1gnO1xyXG4gIHJldHVybiByYXdDdXN0b21lclJlcXVlc3QudmVoaWNsZVR5cGUudG9VcHBlckNhc2UoKSA9PT0gJ1UnID8gJ1VTQURPJyA6ICdOVUVWTyc7XHJcbn07XHJcblxyXG5jb25zdCBwcmVwYXJlTmV3TGVhZCA9IChBbWljYXJzRXZhbHVhdGlvblJlY29yZCkgPT4ge1xyXG4gIGNvbnN0IHsgcmF3Q3VzdG9tZXJSZXF1ZXN0IH0gPSBBbWljYXJzRXZhbHVhdGlvblJlY29yZDtcclxuICByZXR1cm4ge1xyXG4gICAgLi4ucmF3Q3VzdG9tZXJSZXF1ZXN0LFxyXG4gICAgZW5naW5lOiAnQW1pY2FyRW5naW5lJyxcclxuICAgIHRpcG9WZWhpY3VsbzogZ2V0VmVoaWNsZVR5cGUocmF3Q3VzdG9tZXJSZXF1ZXN0KSxcclxuICAgIG1hcmNhOiBnZXRDYXJCcmFuZE5hbWUocmF3Q3VzdG9tZXJSZXF1ZXN0KSxcclxuICAgIGNvbmNlc2lvbmFyaW86IGdldEltcG9ydGVyKHJhd0N1c3RvbWVyUmVxdWVzdCksXHJcbiAgfTtcclxufTtcclxuXHJcbmNvbnN0IGdldEV2YWx1YXRpb25SZXN1bHQgPSBhc3luYyAoQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQpID0+IHtcclxuICByZXR1cm4gZXZhbHVhdGVFcXVpZmF4QW5kQ3VzdG9tZXJEYXRhRWxpZ2liaWxpdHlGb3JMb2FuKEFtaWNhcnNFdmFsdWF0aW9uUmVjb3JkKSA/ICdBUFBST1ZFRCcgOiAnUkVKRUNURUQnO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0UnVsZXMgPSBhc3luYyAoZGVwZW5kZW5jaWVzLCBib2R5KSA9PiB7XHJcbiAgY29uc3QgQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQgPSBhd2FpdCBldmFsdWF0ZVJlcXVlc3QoZGVwZW5kZW5jaWVzLCBib2R5KTtcclxuXHJcbiAgY29uc3QgZXZhbHVhdGlvblJlc3VsdCA9IGF3YWl0IGdldEV2YWx1YXRpb25SZXN1bHQoQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQpO1xyXG5cclxuICBsZXQgbGVhZCA9IGZhbHNlO1xyXG4gIHRyeSB7XHJcbiAgICAvL3NlbmQgbGVhZFxyXG4gICAgY29uc3QgZGF0YSA9IHByZXBhcmVOZXdMZWFkKEFtaWNhcnNFdmFsdWF0aW9uUmVjb3JkKTtcclxuICAgIGNvbnN0IHJlc3VsdGFkb0Fwcm9iYWNpb24gPSB7XHJcbiAgICAgIG5vbWJyZUVudGlkYWRGaW5hbmNpZXJhOiBnZXRFdmFsdWF0aW9uUmVzdWx0KEFtaWNhcnNFdmFsdWF0aW9uUmVjb3JkKSxcclxuICAgIH07XHJcbiAgICBsZWFkID0gYXdhaXQgbmV3TGVhZCh7IGRlcGVuZGVuY2llcywgZGF0YSwgcmVzdWx0YWRvQXByb2JhY2lvbiB9KTtcclxuICAgIGlmIChsZWFkLnN1Y2Nlc3MpIHtcclxuICAgICAgbGVhZCA9IGxlYWQuaWQ7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgbGVhZCwgQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQsIGV2YWx1YXRpb25SZXN1bHQgfTtcclxufTtcclxuY29uc3QgZ2V0SHR0cFJ1bGVzID0gKGRlcGVuZGVuY2llcywgc3RhZ2UpID0+IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGNvbnN0IHsgbGVhZCwgQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQsIGV2YWx1YXRpb25SZXN1bHQgfSA9IGF3YWl0IGdldFJ1bGVzKGRlcGVuZGVuY2llcywgcmVxLmJvZHkpO1xyXG5cclxuICByZXMuanNvbih7XHJcbiAgICByZXN1bHQ6IGV2YWx1YXRpb25SZXN1bHQsXHJcbiAgICBsZWFkLFxyXG4gICAgZXZhbHVhdGlvbjoge1xyXG4gICAgICBhZ2VXaXRoaW5QYXJhbWV0ZXJzOiBBbWljYXJzRXZhbHVhdGlvblJlY29yZC5hZ2VXaXRoaW5QYXJhbWV0ZXJzLFxyXG4gICAgICByYXRpbmdXaXRoaW5QYXJhbWV0ZXJzOiBBbWljYXJzRXZhbHVhdGlvblJlY29yZC5yYXRpbmdXaXRoaW5QYXJhbWV0ZXJzLFxyXG4gICAgICBtaW5pbXVtSW5jb21lV2l0aGluUGFyYW1ldGVyczogQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQubWluaW11bUluY29tZVdpdGhpblBhcmFtZXRlcnMsXHJcbiAgICAgIG1pbmltdW1TZW5pb3JpdHlXaXRoaW5QYXJhbWV0ZXJzOiBBbWljYXJzRXZhbHVhdGlvblJlY29yZC5taW5pbXVtU2VuaW9yaXR5V2l0aGluUGFyYW1ldGVycyxcclxuICAgICAgZXF1aWZheFNjb3JlV2l0aGluUGFyYW1ldGVyczogQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQuZXF1aWZheFNjb3JlV2l0aGluUGFyYW1ldGVycyxcclxuICAgICAgcmNpV2l0aGluUGFyYW1ldGVyczogQW1pY2Fyc0V2YWx1YXRpb25SZWNvcmQucmNpV2l0aGluUGFyYW1ldGVycyxcclxuICAgICAgZGVsaW5xdWVuY2llc1dpdGhpblBhcmFtZXRlcnM6IEFtaWNhcnNFdmFsdWF0aW9uUmVjb3JkLmRlbGlucXVlbmNpZXNXaXRoaW5QYXJhbWV0ZXJzLFxyXG4gICAgfSxcclxuICB9KTtcclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgZ2V0UnVsZXMsXHJcbiAgZ2V0SHR0cFJ1bGVzLFxyXG59O1xyXG4iXX0=