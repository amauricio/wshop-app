function cov_4f45j9k2i(){var path="/vagrant/continuum/core/src/modules/index.js";var hash="dd443810975c732e2a0609c2d7f93a33c7454889";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/modules/index.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:24}},"1":{start:{line:2,column:16},end:{line:2,column:34}},"2":{start:{line:3,column:21},end:{line:3,column:47}},"3":{start:{line:4,column:40},end:{line:4,column:51}},"4":{start:{line:5,column:33},end:{line:5,column:66}},"5":{start:{line:6,column:25},end:{line:6,column:39}},"6":{start:{line:8,column:15},end:{line:35,column:1}},"7":{start:{line:37,column:15},end:{line:37,column:31}},"8":{start:{line:38,column:17},end:{line:38,column:26}},"9":{start:{line:39,column:0},end:{line:72,column:2}},"10":{start:{line:40,column:2},end:{line:70,column:5}},"11":{start:{line:41,column:20},end:{line:41,column:44}},"12":{start:{line:42,column:4},end:{line:69,column:5}},"13":{start:{line:43,column:6},end:{line:68,column:7}},"14":{start:{line:44,column:26},end:{line:44,column:56}},"15":{start:{line:45,column:8},end:{line:49,column:22}},"16":{start:{line:46,column:41},end:{line:46,column:74}},"17":{start:{line:47,column:10},end:{line:47,column:55}},"18":{start:{line:48,column:10},end:{line:48,column:73}},"19":{start:{line:51,column:8},end:{line:65,column:9}},"20":{start:{line:52,column:10},end:{line:64,column:11}},"21":{start:{line:53,column:12},end:{line:63,column:15}},"22":{start:{line:54,column:33},end:{line:54,column:35}},"23":{start:{line:55,column:14},end:{line:55,column:69}},"24":{start:{line:55,column:34},end:{line:55,column:69}},"25":{start:{line:56,column:14},end:{line:62,column:16}},"26":{start:{line:57,column:16},end:{line:61,column:19}},"27":{start:{line:58,column:18},end:{line:60,column:36}},"28":{start:{line:59,column:20},end:{line:59,column:47}},"29":{start:{line:60,column:28},end:{line:60,column:35}},"30":{start:{line:67,column:8},end:{line:67,column:69}},"31":{start:{line:71,column:2},end:{line:71,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:39,column:17},end:{line:39,column:18}},loc:{start:{line:39,column:35},end:{line:72,column:1}},line:39},"1":{name:"(anonymous_1)",decl:{start:{line:40,column:35},end:{line:40,column:36}},loc:{start:{line:40,column:48},end:{line:70,column:3}},line:40},"2":{name:"(anonymous_2)",decl:{start:{line:53,column:35},end:{line:53,column:36}},loc:{start:{line:53,column:73},end:{line:63,column:13}},line:53},"3":{name:"(anonymous_3)",decl:{start:{line:56,column:33},end:{line:56,column:34}},loc:{start:{line:56,column:40},end:{line:62,column:15}},line:56},"4":{name:"(anonymous_4)",decl:{start:{line:57,column:55},end:{line:57,column:56}},loc:{start:{line:57,column:79},end:{line:61,column:17}},line:57}},branchMap:{"0":{loc:{start:{line:21,column:4},end:{line:23,column:19}},type:"cond-expr",locations:[{start:{line:22,column:8},end:{line:22,column:55}},{start:{line:23,column:8},end:{line:23,column:19}}],line:21},"1":{loc:{start:{line:25,column:11},end:{line:25,column:95}},type:"cond-expr",locations:[{start:{line:25,column:67},end:{line:25,column:75}},{start:{line:25,column:78},end:{line:25,column:95}}],line:25},"2":{loc:{start:{line:42,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:42,column:4},end:{line:69,column:5}},{start:{line:42,column:4},end:{line:69,column:5}}],line:42},"3":{loc:{start:{line:52,column:10},end:{line:64,column:11}},type:"if",locations:[{start:{line:52,column:10},end:{line:64,column:11}},{start:{line:52,column:10},end:{line:64,column:11}}],line:52},"4":{loc:{start:{line:55,column:14},end:{line:55,column:69}},type:"if",locations:[{start:{line:55,column:14},end:{line:55,column:69}},{start:{line:55,column:14},end:{line:55,column:69}}],line:55}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dd443810975c732e2a0609c2d7f93a33c7454889"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_4f45j9k2i=function(){return actualCoverage;};}return actualCoverage;}cov_4f45j9k2i();const fs=(cov_4f45j9k2i().s[0]++,require('fs'));const express=(cov_4f45j9k2i().s[1]++,require('express'));const{debugApp}=(cov_4f45j9k2i().s[2]++,require('../config/debug'));const{SERVER_HOST,PORT,NODE_ENV}=(cov_4f45j9k2i().s[3]++,process.env);const{RestException,errors}=(cov_4f45j9k2i().s[4]++,require('modules/rest.exception'));const{default:app}=(cov_4f45j9k2i().s[5]++,require('app'));const apiDoc=(cov_4f45j9k2i().s[6]++,{swagger:'2.0',title:'Amicar API Doc.',info:{description:'',version:'0.0.1',title:'Amicar evaluation Doc.',termsOfService:'https://www.amicar.cl/terminos-y-condiciones',contact:{email:'ti@amicar.cl'}},host:['test','dev','development'].indexOf(NODE_ENV)>-1?(cov_4f45j9k2i().b[0][0]++,`${SERVER_HOST.replace('http://','')}:${PORT}`):(cov_4f45j9k2i().b[0][1]++,SERVER_HOST),basePath:'/',schemes:['test','dev','development'].indexOf(NODE_ENV)>-1?(cov_4f45j9k2i().b[1][0]++,['http']):(cov_4f45j9k2i().b[1][1]++,['https','http']),paths:{},securityDefinitions:{api_key:{type:'apiKey',name:'x-api-key',in:'header'}},definitions:{}});const router=(cov_4f45j9k2i().s[7]++,express.Router());const basePath=(cov_4f45j9k2i().s[8]++,__dirname);cov_4f45j9k2i().s[9]++;module.exports=dependencies=>{cov_4f45j9k2i().f[0]++;cov_4f45j9k2i().s[10]++;fs.readdirSync(basePath).forEach(dirName=>{cov_4f45j9k2i().f[1]++;const dirPath=(cov_4f45j9k2i().s[11]++,`${basePath}/${dirName}`);cov_4f45j9k2i().s[12]++;if(fs.lstatSync(dirPath).isDirectory()){cov_4f45j9k2i().b[2][0]++;cov_4f45j9k2i().s[13]++;try{const ctrlPaths=(cov_4f45j9k2i().s[14]++,require(dirPath)(dependencies));cov_4f45j9k2i().s[15]++;try{const{paths,definitions}=(cov_4f45j9k2i().s[16]++,require(`${dirPath}/apiDoc.json`));cov_4f45j9k2i().s[17]++;apiDoc.paths={...apiDoc.paths,...paths};cov_4f45j9k2i().s[18]++;apiDoc.definitions={...apiDoc.definitions,...definitions};}catch(e){}cov_4f45j9k2i().s[19]++;for(const key in ctrlPaths){cov_4f45j9k2i().s[20]++;if(ctrlPaths.hasOwnProperty(key)){cov_4f45j9k2i().b[3][0]++;cov_4f45j9k2i().s[21]++;ctrlPaths[key].forEach(({method,path,ctrlMiddleware})=>{cov_4f45j9k2i().f[2]++;const middleware=(cov_4f45j9k2i().s[22]++,[]);cov_4f45j9k2i().s[23]++;if(ctrlMiddleware){cov_4f45j9k2i().b[4][0]++;cov_4f45j9k2i().s[24]++;middleware.push(...ctrlMiddleware);}else{cov_4f45j9k2i().b[4][1]++;}cov_4f45j9k2i().s[25]++;middleware.forEach(item=>{cov_4f45j9k2i().f[3]++;cov_4f45j9k2i().s[26]++;router.route(`/${key}${path}`)[method](async(req,res,next)=>{cov_4f45j9k2i().f[4]++;cov_4f45j9k2i().s[27]++;try{cov_4f45j9k2i().s[28]++;await item(req,res,next);}catch(e){cov_4f45j9k2i().s[29]++;next(e);};});});});}else{cov_4f45j9k2i().b[3][1]++;}}}catch(err){cov_4f45j9k2i().s[30]++;debugApp(`>>>>>>>>>>>>>: ${__filename}::ERROR: `,err.stack);}}else{cov_4f45j9k2i().b[2][1]++;}});cov_4f45j9k2i().s[31]++;return{router,apiDoc};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsImV4cHJlc3MiLCJkZWJ1Z0FwcCIsIlNFUlZFUl9IT1NUIiwiUE9SVCIsIk5PREVfRU5WIiwicHJvY2VzcyIsImVudiIsIlJlc3RFeGNlcHRpb24iLCJlcnJvcnMiLCJkZWZhdWx0IiwiYXBwIiwiYXBpRG9jIiwic3dhZ2dlciIsInRpdGxlIiwiaW5mbyIsImRlc2NyaXB0aW9uIiwidmVyc2lvbiIsInRlcm1zT2ZTZXJ2aWNlIiwiY29udGFjdCIsImVtYWlsIiwiaG9zdCIsImluZGV4T2YiLCJyZXBsYWNlIiwiYmFzZVBhdGgiLCJzY2hlbWVzIiwicGF0aHMiLCJzZWN1cml0eURlZmluaXRpb25zIiwiYXBpX2tleSIsInR5cGUiLCJuYW1lIiwiaW4iLCJkZWZpbml0aW9ucyIsInJvdXRlciIsIlJvdXRlciIsIl9fZGlybmFtZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZXBlbmRlbmNpZXMiLCJyZWFkZGlyU3luYyIsImZvckVhY2giLCJkaXJOYW1lIiwiZGlyUGF0aCIsImxzdGF0U3luYyIsImlzRGlyZWN0b3J5IiwiY3RybFBhdGhzIiwiZSIsImtleSIsImhhc093blByb3BlcnR5IiwibWV0aG9kIiwicGF0aCIsImN0cmxNaWRkbGV3YXJlIiwibWlkZGxld2FyZSIsInB1c2giLCJpdGVtIiwicm91dGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyIiwiX19maWxlbmFtZSIsInN0YWNrIl0sIm1hcHBpbmdzIjoiNnhJQWVZO3lGQWZaLEtBQU1BLENBQUFBLEVBQUUseUJBQUdDLE9BQU8sQ0FBQyxJQUFELENBQVYsQ0FBUixDQUNBLEtBQU1DLENBQUFBLE9BQU8seUJBQUdELE9BQU8sQ0FBQyxTQUFELENBQVYsQ0FBYixDQUNBLEtBQU0sQ0FBRUUsUUFBRiwwQkFBZUYsT0FBTyxDQUFDLGlCQUFELENBQXRCLENBQU4sQ0FDQSxLQUFNLENBQUVHLFdBQUYsQ0FBZUMsSUFBZixDQUFxQkMsUUFBckIs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QXVCLENBQUMsQ0FBRVMsTUFBRixDQUFVQyxJQUFWLENBQWdCQyxjQUFoQixDQUFELEdBQXNDLHdCQUMzRCxLQUFNQyxDQUFBQSxVQUFVLDBCQUFHLEVBQUgsQ0FBaEIsQ0FEMkQsd0JBRTNELEdBQUlELGNBQUosQ0FBb0IsbURBQUFDLFVBQVUsQ0FBQ0MsSUFBWCxDQUFnQixHQUFHRixjQUFuQixFQUFtQyxDQUF2RCxnQ0FGMkQsd0JBRzNEQyxVQUFVLENBQUNaLE9BQVgsQ0FBbUJjLElBQUksRUFBRyxnREFDeEJyQixNQUFNLENBQUNzQixLQUFQLENBQWMsSUFBR1IsR0FBSSxHQUFFRyxJQUFLLEVBQTVCLEVBQStCRCxNQUEvQixFQUF1QyxNQUFPTyxHQUFQLENBQVlDLEdBQVosQ0FBaUJDLElBQWpCLEdBQXdCLGdEQUM3RCxHQUFHLHlCQUNELEtBQU1KLENBQUFBLElBQUksQ0FBQ0UsR0FBRCxDQUFNQyxHQUFOLENBQVdDLElBQVgsQ0FBVixDQUNELE9BQU1aLENBQU4sQ0FBUSx5QkFBQ1ksSUFBSSxDQUFDWixDQUFELENBQUosQ0FBUSxFQUNuQixDQUpELEVBS0QsQ0FORCxFQU9ELENBVkQsRUFXRCxDQVpELGdDQWFELENBQ0YsQ0FBQyxNQUFPYSxHQUFQLENBQVkseUJBQ1p6RCxRQUFRLENBQUUsa0JBQWlCMEQsVUFBVyxXQUE5QixDQUEwQ0QsR0FBRyxDQUFDRSxLQUE5QyxDQUFSLENBQ0QsQ0FDRixDQTNCRCxnQ0E0QkQsQ0E5QkQsRUFEaUMsd0JBZ0NqQyxNQUFPLENBQUU1QixNQUFGLENBQVVyQixNQUFWLENBQVAsQ0FDRCxDQWpDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgeyBkZWJ1Z0FwcCB9ID0gcmVxdWlyZSgnLi4vY29uZmlnL2RlYnVnJyk7XHJcbmNvbnN0IHsgU0VSVkVSX0hPU1QsIFBPUlQsIE5PREVfRU5WIH0gPSBwcm9jZXNzLmVudjtcclxuY29uc3QgeyBSZXN0RXhjZXB0aW9uLCBlcnJvcnN9ID0gcmVxdWlyZSgnbW9kdWxlcy9yZXN0LmV4Y2VwdGlvbicpO1xyXG5jb25zdCB7IGRlZmF1bHQ6IGFwcCB9ID0gcmVxdWlyZSgnYXBwJyk7XHJcblxyXG5jb25zdCBhcGlEb2MgPSB7XHJcbiAgc3dhZ2dlcjogJzIuMCcsXHJcbiAgdGl0bGU6ICdBbWljYXIgQVBJIERvYy4nLFxyXG4gIGluZm86IHtcclxuICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgIHZlcnNpb246ICcwLjAuMScsXHJcbiAgICB0aXRsZTogJ0FtaWNhciBldmFsdWF0aW9uIERvYy4nLFxyXG4gICAgdGVybXNPZlNlcnZpY2U6ICdodHRwczovL3d3dy5hbWljYXIuY2wvdGVybWlub3MteS1jb25kaWNpb25lcycsXHJcbiAgICBjb250YWN0OiB7XHJcbiAgICAgIGVtYWlsOiAndGlAYW1pY2FyLmNsJyxcclxuICAgIH0sXHJcbiAgfSxcclxuICBob3N0OlxyXG4gICAgWyd0ZXN0JywgJ2RldicsICdkZXZlbG9wbWVudCddLmluZGV4T2YoTk9ERV9FTlYpID4gLTFcclxuICAgICAgPyBgJHtTRVJWRVJfSE9TVC5yZXBsYWNlKCdodHRwOi8vJywgJycpfToke1BPUlR9YFxyXG4gICAgICA6IFNFUlZFUl9IT1NULFxyXG4gIGJhc2VQYXRoOiAnLycsXHJcbiAgc2NoZW1lczogWyd0ZXN0JywgJ2RldicsICdkZXZlbG9wbWVudCddLmluZGV4T2YoTk9ERV9FTlYpID4gLTEgPyBbJ2h0dHAnXSA6IFsnaHR0cHMnLCAnaHR0cCddLFxyXG4gIHBhdGhzOiB7fSxcclxuICBzZWN1cml0eURlZmluaXRpb25zOiB7XHJcbiAgICBhcGlfa2V5OiB7XHJcbiAgICAgIHR5cGU6ICdhcGlLZXknLFxyXG4gICAgICBuYW1lOiAneC1hcGkta2V5JyxcclxuICAgICAgaW46ICdoZWFkZXInLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIGRlZmluaXRpb25zOiB7fSxcclxufTtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IGJhc2VQYXRoID0gX19kaXJuYW1lO1xyXG5tb2R1bGUuZXhwb3J0cyA9IChkZXBlbmRlbmNpZXMpID0+IHtcclxuICBmcy5yZWFkZGlyU3luYyhiYXNlUGF0aCkuZm9yRWFjaCgoZGlyTmFtZSkgPT4ge1xyXG4gICAgY29uc3QgZGlyUGF0aCA9IGAke2Jhc2VQYXRofS8ke2Rpck5hbWV9YDtcclxuICAgIGlmIChmcy5sc3RhdFN5bmMoZGlyUGF0aCkuaXNEaXJlY3RvcnkoKSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGN0cmxQYXRocyA9IHJlcXVpcmUoZGlyUGF0aCkoZGVwZW5kZW5jaWVzKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgeyBwYXRocywgZGVmaW5pdGlvbnMgfSA9IHJlcXVpcmUoYCR7ZGlyUGF0aH0vYXBpRG9jLmpzb25gKTtcclxuICAgICAgICAgIGFwaURvYy5wYXRocyA9IHsgLi4uYXBpRG9jLnBhdGhzLCAuLi5wYXRocyB9O1xyXG4gICAgICAgICAgYXBpRG9jLmRlZmluaXRpb25zID0geyAuLi5hcGlEb2MuZGVmaW5pdGlvbnMsIC4uLmRlZmluaXRpb25zIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge31cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3RybFBhdGhzKSB7XHJcbiAgICAgICAgICBpZiAoY3RybFBhdGhzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgY3RybFBhdGhzW2tleV0uZm9yRWFjaCgoeyBtZXRob2QsIHBhdGgsIGN0cmxNaWRkbGV3YXJlIH0pID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBtaWRkbGV3YXJlID0gW107XHJcbiAgICAgICAgICAgICAgaWYgKGN0cmxNaWRkbGV3YXJlKSBtaWRkbGV3YXJlLnB1c2goLi4uY3RybE1pZGRsZXdhcmUpO1xyXG4gICAgICAgICAgICAgIG1pZGRsZXdhcmUuZm9yRWFjaChpdGVtID0+e1xyXG4gICAgICAgICAgICAgICAgcm91dGVyLnJvdXRlKGAvJHtrZXl9JHtwYXRofWApW21ldGhvZF0oYXN5bmMgKHJlcSwgcmVzLCBuZXh0KT0+e1xyXG4gICAgICAgICAgICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaXRlbShyZXEsIHJlcywgbmV4dCk7XHJcbiAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtuZXh0KGUpfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgZGVidWdBcHAoYD4+Pj4+Pj4+Pj4+Pj46ICR7X19maWxlbmFtZX06OkVSUk9SOiBgLCBlcnIuc3RhY2spO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHsgcm91dGVyLCBhcGlEb2MgfTtcclxufTtcclxuIl19