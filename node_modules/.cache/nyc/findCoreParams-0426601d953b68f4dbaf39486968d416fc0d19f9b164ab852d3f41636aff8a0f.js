function cov_nghqh7rel(){var path="/vagrant/continuum/core/src/common/helpers/findCoreParams.js";var hash="ea640f5acf22321f6243e3c67b90cf5a1b8d5fb1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/common/helpers/findCoreParams.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:35}},"1":{start:{line:2,column:21},end:{line:2,column:46}},"2":{start:{line:4,column:15},end:{line:4,column:66}},"3":{start:{line:5,column:0},end:{line:39,column:2}},"4":{start:{line:15,column:2},end:{line:38,column:3}},"5":{start:{line:16,column:19},end:{line:18,column:6}},"6":{start:{line:19,column:4},end:{line:19,column:97}},"7":{start:{line:19,column:29},end:{line:19,column:97}},"8":{start:{line:20,column:4},end:{line:20,column:47}},"9":{start:{line:20,column:26},end:{line:20,column:47}},"10":{start:{line:21,column:4},end:{line:24,column:86}},"11":{start:{line:23,column:42},end:{line:23,column:97}},"12":{start:{line:25,column:4},end:{line:34,column:5}},"13":{start:{line:26,column:6},end:{line:28,column:7}},"14":{start:{line:27,column:8},end:{line:27,column:103}},"15":{start:{line:29,column:6},end:{line:33,column:7}},"16":{start:{line:30,column:8},end:{line:30,column:92}},"17":{start:{line:32,column:8},end:{line:32,column:85}},"18":{start:{line:35,column:4},end:{line:35,column:11}},"19":{start:{line:37,column:4},end:{line:37,column:33}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:14,column:6},end:{line:39,column:1}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:21},end:{line:23,column:22}},loc:{start:{line:23,column:42},end:{line:23,column:97}},line:23}},branchMap:{"0":{loc:{start:{line:7,column:2},end:{line:7,column:34}},type:"default-arg",locations:[{start:{line:7,column:25},end:{line:7,column:34}}],line:7},"1":{loc:{start:{line:19,column:4},end:{line:19,column:97}},type:"if",locations:[{start:{line:19,column:4},end:{line:19,column:97}},{start:{line:19,column:4},end:{line:19,column:97}}],line:19},"2":{loc:{start:{line:20,column:4},end:{line:20,column:47}},type:"if",locations:[{start:{line:20,column:4},end:{line:20,column:47}},{start:{line:20,column:4},end:{line:20,column:47}}],line:20},"3":{loc:{start:{line:22,column:6},end:{line:24,column:85}},type:"cond-expr",locations:[{start:{line:23,column:10},end:{line:23,column:99}},{start:{line:24,column:10},end:{line:24,column:85}}],line:22},"4":{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:34,column:5}},{start:{line:25,column:4},end:{line:34,column:5}}],line:25},"5":{loc:{start:{line:26,column:6},end:{line:28,column:7}},type:"if",locations:[{start:{line:26,column:6},end:{line:28,column:7}},{start:{line:26,column:6},end:{line:28,column:7}}],line:26},"6":{loc:{start:{line:29,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:29,column:6},end:{line:33,column:7}},{start:{line:29,column:6},end:{line:33,column:7}}],line:29}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea640f5acf22321f6243e3c67b90cf5a1b8d5fb1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_nghqh7rel=function(){return actualCoverage;};}return actualCoverage;}cov_nghqh7rel();const{Op}=(cov_nghqh7rel().s[0]++,require('sequelize'));const exportModels=(cov_nghqh7rel().s[1]++,require('./exportModels'));const models=(cov_nghqh7rel().s[2]++,exportModels([__dirname,'..','models'].join('/')));cov_nghqh7rel().s[3]++;module.exports=async({key,replaceOriginValueBy=(cov_nghqh7rel().b[0][0]++,undefined),requiredParamKey,columnNameFind,typeFind,value,bodyData,index})=>{cov_nghqh7rel().f[0]++;cov_nghqh7rel().s[4]++;try{const dbData=(cov_nghqh7rel().s[5]++,await models.CoreParamsPgModel.findAll({where:{[Op.and]:[{[columnNameFind]:value,type:typeFind}]}}));cov_nghqh7rel().s[6]++;if(dbData.length===0){cov_nghqh7rel().b[1][0]++;cov_nghqh7rel().s[7]++;throw new Error(`${requiredParamKey} ${key} value not found in DB`);}else{cov_nghqh7rel().b[1][1]++;}cov_nghqh7rel().s[8]++;if(!bodyData.dbData){cov_nghqh7rel().b[2][0]++;cov_nghqh7rel().s[9]++;bodyData.dbData={};}else{cov_nghqh7rel().b[2][1]++;}cov_nghqh7rel().s[10]++;bodyData.dbData[`${requiredParamKey}-${key}`]=dbData.length>1?(cov_nghqh7rel().b[3][0]++,dbData.map(({dataValues})=>{cov_nghqh7rel().f[1]++;cov_nghqh7rel().s[11]++;return{...dataValues,id:dataValues[replaceOriginValueBy]};})):(cov_nghqh7rel().b[3][1]++,{...dbData[0].dataValues,id:dbData[0].dataValues[replaceOriginValueBy]});cov_nghqh7rel().s[12]++;if(replaceOriginValueBy){cov_nghqh7rel().b[4][0]++;cov_nghqh7rel().s[13]++;if(!dbData[0].dataValues[replaceOriginValueBy]){cov_nghqh7rel().b[5][0]++;cov_nghqh7rel().s[14]++;throw new Error(`Value to replace for ${requiredParamKey}.${key} can't be null on coreParams`);}else{cov_nghqh7rel().b[5][1]++;}cov_nghqh7rel().s[15]++;if(index!==undefined){cov_nghqh7rel().b[6][0]++;cov_nghqh7rel().s[16]++;bodyData[requiredParamKey][index][key]=dbData[0].dataValues[replaceOriginValueBy];}else{cov_nghqh7rel().b[6][1]++;cov_nghqh7rel().s[17]++;bodyData[requiredParamKey][key]=dbData[0].dataValues[replaceOriginValueBy];}}else{cov_nghqh7rel().b[4][1]++;}cov_nghqh7rel().s[18]++;return;}catch(err){cov_nghqh7rel().s[19]++;throw new Error(err.message);}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbmRDb3JlUGFyYW1zLmpzIl0sIm5hbWVzIjpbIk9wIiwicmVxdWlyZSIsImV4cG9ydE1vZGVscyIsIm1vZGVscyIsIl9fZGlybmFtZSIsImpvaW4iLCJtb2R1bGUiLCJleHBvcnRzIiwia2V5IiwicmVwbGFjZU9yaWdpblZhbHVlQnkiLCJ1bmRlZmluZWQiLCJyZXF1aXJlZFBhcmFtS2V5IiwiY29sdW1uTmFtZUZpbmQiLCJ0eXBlRmluZCIsInZhbHVlIiwiYm9keURhdGEiLCJpbmRleCIsImRiRGF0YSIsIkNvcmVQYXJhbXNQZ01vZGVsIiwiZmluZEFsbCIsIndoZXJlIiwiYW5kIiwidHlwZSIsImxlbmd0aCIsIkVycm9yIiwibWFwIiwiZGF0YVZhbHVlcyIsImlkIiwiZXJyIiwibWVzc2FnZSJdLCJtYXBwaW5ncyI6Imk4R0FlWTt5RkFmWixLQUFNLENBQUVBLEVBQUYsMEJBQVNDLE9BQU8sQ0FBQyxXQUFELENBQWhCLENBQU4sQ0FDQSxLQUFNQyxDQUFBQSxZQUFZLHlCQUFHRCxPQUFPLENBQUMsZ0JBQUQsQ0FBVixDQUFsQixDQUVBLEtBQU1FLENBQUFBLE1BQU0seUJBQUdELFlBQVksQ0FBQyxDQUFDRSxTQUFELENBQVksSUFBWixDQUFrQixRQUFsQixFQUE0QkMsSUFBNUIsQ0FBaUMsR0FBakMsQ0FBRCxDQUFmLENBQVosQyx1QkFDQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLE1BQU8sQ0FDdEJDLEdBRHNCLENBRXRCQyxvQkFBb0IsNEJBQUdDLFNBQUgsQ0FGRSxDQUd0QkMsZ0JBSHNCLENBSXRCQyxjQUpzQixDQUt0QkMsUUFMc0IsQ0FNdEJDLEtBTnNCLENBT3RCQyxRQVBzQixDQVF0QkMsS0FSc0IsQ0FBUCxHQVNYLCtDQUNKLEdBQUksQ0FDRixLQUFNQyxDQUFBQSxNQUFNLHlCQUFHLEtBQU1kLENBQUFBLE1BQU0sQ0FBQ2UsaUJBQVAsQ0FBeUJDLE9BQXpCLENBQWlDLENBQ3BEQyxLQUFLLENBQUUsQ0FBRSxDQUFDcEIsRUFBRSxDQUFDcUIsR0FBSixFQUFVLENBQUMsQ0FBRSxDQUFDVCxjQUFELEVBQWtCRSxLQUFwQixDQUEyQlEsSUFBSSxDQUFFVCxRQUFqQyxDQUFELENBQVosQ0FENkMsQ0FBakMsQ0FBVCxDQUFaLENBREUsdUJBSUYsR0FBSUksTUFBTSxDQUFDTSxNQUFQLEdBQWtCLENBQXRCLENBQXlCLHVEQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVyxHQUFFYixnQkFBaUIsSUFBR0gsR0FBSSx3QkFBckMsQ0FBTixDQUFvRSxDQUE3RixnQ0FKRSx1QkFLRixHQUFJLENBQUNPLFFBQVEsQ0FBQ0UsTUFBZCxDQUFzQixrREFBQUYsUUFBUSxDQUFDRSxNQUFULENBQWtCLEVBQWxCLENBQXFCLENBQTNDLGdDQUxFLHdCQU1GRixRQUFRLENBQUNFLE1BQVQsQ0FBaUIsR0FBRU4sZ0JBQWlCLElBQUdILEdBQUksRUFBM0MsRUFDRVMsTUFBTSxDQUFDTSxNQUFQLENBQWdCLENBQWhCLDRCQUNJTixNQUFNLENBQUNRLEdBQVAsQ0FBVyxDQUFDLENBQUVDLFVBQUYsQ0FBRCxHQUFxQix1REFBRSxHQUFHQSxVQUFMLENBQWlCQyxFQUFFLENBQUVELFVBQVUsQ0FBQ2pCLG9CQUFELENBQS9CLEVBQXVELENBQXZGLENBREosNkJBRUksQ0FBRSxHQUFHUSxNQUFNLENBQUMsQ0FBRCxDQUFOLENBQVVTLFVBQWYsQ0FBMkJDLEVBQUUsQ0FBRVYsTUFBTSxDQUFDLENBQUQsQ0FBTixDQUFVUyxVQUFWLENBQXFCakIsb0JBQXJCLENBQS9CLENBRkosQ0FERixDQU5FLHdCQVVGLEdBQUlBLG9CQUFKLENBQTBCLG1EQUN4QixHQUFJLENBQUNRLE1BQU0sQ0FBQyxDQUFELENBQU4sQ0FBVVMsVUFBVixDQUFxQmpCLG9CQUFyQixDQUFMLENBQWlELG1EQUMvQyxLQUFNLElBQUllLENBQUFBLEtBQUosQ0FBVyx3QkFBdUJiLGdCQUFpQixJQUFHSCxHQUFJLDhCQUExRCxDQUFOLENBQ0QsQ0FGRCxnQ0FEd0Isd0JBSXhCLEdBQUlRLEtBQUssR0FBS04sU0FBZCxDQUF5QixtREFDdkJLLFFBQVEsQ0FBQ0osZ0JBQUQsQ0FBUixDQUEyQkssS0FBM0IsRUFBa0NSLEdBQWxDLEVBQXlDUyxNQUFNLENBQUMsQ0FBRCxDQUFOLENBQVVTLFVBQVYsQ0FBcUJqQixvQkFBckIsQ0FBekMsQ0FDRCxDQUZELElBRU8sbURBQ0xNLFFBQVEsQ0FBQ0osZ0JBQUQsQ0FBUixDQUEyQkgsR0FBM0IsRUFBa0NTLE1BQU0sQ0FBQyxDQUFELENBQU4sQ0FBVVMsVUFBVixDQUFxQmpCLG9CQUFyQixDQUFsQyxDQUNELENBQ0YsQ0FURCxnQ0FWRSx3QkFvQkYsT0FDRCxDQUFDLE1BQU9tQixHQUFQLENBQVkseUJBQ1osS0FBTSxJQUFJSixDQUFBQSxLQUFKLENBQVVJLEdBQUcsQ0FBQ0MsT0FBZCxDQUFOLENBQ0QsQ0FDRixDQWxDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgT3AgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpO1xyXG5jb25zdCBleHBvcnRNb2RlbHMgPSByZXF1aXJlKCcuL2V4cG9ydE1vZGVscycpO1xyXG5cclxuY29uc3QgbW9kZWxzID0gZXhwb3J0TW9kZWxzKFtfX2Rpcm5hbWUsICcuLicsICdtb2RlbHMnXS5qb2luKCcvJykpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jICh7XHJcbiAga2V5LFxyXG4gIHJlcGxhY2VPcmlnaW5WYWx1ZUJ5ID0gdW5kZWZpbmVkLFxyXG4gIHJlcXVpcmVkUGFyYW1LZXksXHJcbiAgY29sdW1uTmFtZUZpbmQsXHJcbiAgdHlwZUZpbmQsXHJcbiAgdmFsdWUsXHJcbiAgYm9keURhdGEsXHJcbiAgaW5kZXgsXHJcbn0pID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGJEYXRhID0gYXdhaXQgbW9kZWxzLkNvcmVQYXJhbXNQZ01vZGVsLmZpbmRBbGwoe1xyXG4gICAgICB3aGVyZTogeyBbT3AuYW5kXTogW3sgW2NvbHVtbk5hbWVGaW5kXTogdmFsdWUsIHR5cGU6IHR5cGVGaW5kIH1dIH0sXHJcbiAgICB9KTtcclxuICAgIGlmIChkYkRhdGEubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoYCR7cmVxdWlyZWRQYXJhbUtleX0gJHtrZXl9IHZhbHVlIG5vdCBmb3VuZCBpbiBEQmApO1xyXG4gICAgaWYgKCFib2R5RGF0YS5kYkRhdGEpIGJvZHlEYXRhLmRiRGF0YSA9IHt9O1xyXG4gICAgYm9keURhdGEuZGJEYXRhW2Ake3JlcXVpcmVkUGFyYW1LZXl9LSR7a2V5fWBdID1cclxuICAgICAgZGJEYXRhLmxlbmd0aCA+IDFcclxuICAgICAgICA/IGRiRGF0YS5tYXAoKHsgZGF0YVZhbHVlcyB9KSA9PiAoeyAuLi5kYXRhVmFsdWVzLCBpZDogZGF0YVZhbHVlc1tyZXBsYWNlT3JpZ2luVmFsdWVCeV0gfSkpXHJcbiAgICAgICAgOiB7IC4uLmRiRGF0YVswXS5kYXRhVmFsdWVzLCBpZDogZGJEYXRhWzBdLmRhdGFWYWx1ZXNbcmVwbGFjZU9yaWdpblZhbHVlQnldIH07XHJcbiAgICBpZiAocmVwbGFjZU9yaWdpblZhbHVlQnkpIHtcclxuICAgICAgaWYgKCFkYkRhdGFbMF0uZGF0YVZhbHVlc1tyZXBsYWNlT3JpZ2luVmFsdWVCeV0pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIHRvIHJlcGxhY2UgZm9yICR7cmVxdWlyZWRQYXJhbUtleX0uJHtrZXl9IGNhbid0IGJlIG51bGwgb24gY29yZVBhcmFtc2ApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgYm9keURhdGFbcmVxdWlyZWRQYXJhbUtleV1baW5kZXhdW2tleV0gPSBkYkRhdGFbMF0uZGF0YVZhbHVlc1tyZXBsYWNlT3JpZ2luVmFsdWVCeV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYm9keURhdGFbcmVxdWlyZWRQYXJhbUtleV1ba2V5XSA9IGRiRGF0YVswXS5kYXRhVmFsdWVzW3JlcGxhY2VPcmlnaW5WYWx1ZUJ5XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGVyci5tZXNzYWdlKTtcclxuICB9XHJcbn07XHJcbiJdfQ==