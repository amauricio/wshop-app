function cov_2790s8luu9(){var path="/vagrant/continuum/core/src/modules/evaluation/middlewares/wic/fn/getResponseFromWicApi.js";var hash="60ce209209bc70f3b695ba705c59a19c5c1803f4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/vagrant/continuum/core/src/modules/evaluation/middlewares/wic/fn/getResponseFromWicApi.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:32}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:4,column:84},end:{line:4,column:95}},"3":{start:{line:7,column:30},end:{line:50,column:1}},"4":{start:{line:8,column:23},end:{line:8,column:27}},"5":{start:{line:10,column:18},end:{line:26,column:5}},"6":{start:{line:28,column:21},end:{line:34,column:6}},"7":{start:{line:36,column:4},end:{line:49,column:5}},"8":{start:{line:37,column:8},end:{line:37,column:67}},"9":{start:{line:38,column:8},end:{line:38,column:33}},"10":{start:{line:40,column:24},end:{line:40,column:26}},"11":{start:{line:41,column:20},end:{line:41,column:41}},"12":{start:{line:42,column:27},end:{line:42,column:54}},"13":{start:{line:43,column:8},end:{line:46,column:9}},"14":{start:{line:44,column:12},end:{line:45,column:32}},"15":{start:{line:45,column:12},end:{line:45,column:32}},"16":{start:{line:47,column:8},end:{line:47,column:25}},"17":{start:{line:51,column:0},end:{line:53,column:1}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:30},end:{line:7,column:31}},loc:{start:{line:7,column:45},end:{line:50,column:1}},line:7}},branchMap:{"0":{loc:{start:{line:36,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:49,column:5}},{start:{line:36,column:4},end:{line:49,column:5}}],line:36},"1":{loc:{start:{line:44,column:12},end:{line:45,column:32}},type:"if",locations:[{start:{line:44,column:12},end:{line:45,column:32}},{start:{line:44,column:12},end:{line:45,column:32}}],line:44}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60ce209209bc70f3b695ba705c59a19c5c1803f4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2790s8luu9=function(){return actualCoverage;};}return actualCoverage;}cov_2790s8luu9();const xml2js=(cov_2790s8luu9().s[0]++,require('xml2js'));const axios=(cov_2790s8luu9().s[1]++,require('axios'));const{USE_MOCK_DATA,WIC_BASE_URL,WIC_CLIENT_ID,WIC_CLIENT_SECRET,WIC_TOKEN}=(cov_2790s8luu9().s[2]++,process.env);cov_2790s8luu9().s[3]++;const getResponseFromWicApi=async body=>{cov_2790s8luu9().f[0]++;const dataToSend=(cov_2790s8luu9().s[4]++,body);let nMapped=(cov_2790s8luu9().s[5]++,{"tipo_modelo":dataToSend["model_type"],"staging":dataToSend["staging"],"Tipo_Trabajador":dataToSend["job_type"],"Nuevo":dataToSend["is_new"],"Liviano":dataToSend["lightweight"],"Nacionalidad":dataToSend["nationality"],"Plazo":dataToSend["term"],"Precio_Vehiculo":dataToSend["car_price"],"Total_Financiar":dataToSend["total"],"Contado":dataToSend["cash"],"Total_Ingresos":dataToSend["income"],"Retoma":dataToSend["retake"],"Valor_Cuota":dataToSend["fee_value"],"Anios_Permanencia_Emppleo_Anterior":dataToSend["years_last_job"],"Fecha_Ingreso_Empleo":dataToSend["date_last_job"]});const response=(cov_2790s8luu9().s[6]++,await axios({method:'post',url:WIC_BASE_URL,data:nMapped,headers:{"Authorization":`Bearer ${WIC_TOKEN}`,'Content-Type':'application/json'}}));cov_2790s8luu9().s[7]++;if(response.status!==200){cov_2790s8luu9().b[0][0]++;cov_2790s8luu9().s[8]++;debugApp(`${__dirname}/WIC::getResponseFromWicApi::ERROR`);cov_2790s8luu9().s[9]++;throw new Error('ERROR');}else{cov_2790s8luu9().b[0][1]++;let nResponse=(cov_2790s8luu9().s[10]++,[]);let data=(cov_2790s8luu9().s[11]++,response.data['data']);let codeDisabled=(cov_2790s8luu9().s[12]++,["AUTOFIN","MUNDOCREDITO"]);cov_2790s8luu9().s[13]++;for(var obj of data){cov_2790s8luu9().s[14]++;if(!codeDisabled.includes(obj['EEFF'])){cov_2790s8luu9().b[1][0]++;cov_2790s8luu9().s[15]++;nResponse.push(obj);}else{cov_2790s8luu9().b[1][1]++;}}cov_2790s8luu9().s[16]++;return nResponse;}};cov_2790s8luu9().s[17]++;module.exports={getResponseFromWicApi};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFJlc3BvbnNlRnJvbVdpY0FwaS5qcyJdLCJuYW1lcyI6WyJ4bWwyanMiLCJyZXF1aXJlIiwiYXhpb3MiLCJVU0VfTU9DS19EQVRBIiwiV0lDX0JBU0VfVVJMIiwiV0lDX0NMSUVOVF9JRCIsIldJQ19DTElFTlRfU0VDUkVUIiwiV0lDX1RPS0VOIiwicHJvY2VzcyIsImVudiIsImdldFJlc3BvbnNlRnJvbVdpY0FwaSIsImJvZHkiLCJkYXRhVG9TZW5kIiwibk1hcHBlZCIsInJlc3BvbnNlIiwibWV0aG9kIiwidXJsIiwiZGF0YSIsImhlYWRlcnMiLCJzdGF0dXMiLCJkZWJ1Z0FwcCIsIl9fZGlybmFtZSIsIkVycm9yIiwiblJlc3BvbnNlIiwiY29kZURpc2FibGVkIiwib2JqIiwiaW5jbHVkZXMiLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Imd5RUFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFWLENBQVosQ0FDQSxLQUFNQyxDQUFBQSxLQUFLLDBCQUFHRCxPQUFPLENBQUMsT0FBRCxDQUFWLENBQVgsQ0FFQSxLQUFNLENBQUVFLGFBQUYsQ0FBaUJDLFlBQWpCLENBQStCQyxhQUEvQixDQUE4Q0MsaUJBQTlDLENBQWdFQyxTQUFoRSwyQkFBOEVDLE9BQU8sQ0FBQ0MsR0FBdEYsQ0FBTixDLHdCQUdBLEtBQU1DLENBQUFBLHFCQUFxQixDQUFHLEtBQU9DLENBQUFBLElBQVAsRUFBZSx5QkFDekMsS0FBTUMsQ0FBQUEsVUFBVSwwQkFBR0QsSUFBSCxDQUFoQixDQUVBLEdBQUlFLENBQUFBLE9BQU8sMEJBQUcsQ0FDVixjQUFjRCxVQUFVLENBQUMsWUFBRCxDQURkLENBRVYsVUFBV0EsVUFBVSxDQUFDLFNBQUQsQ0FGWCxDQUdWLGtCQUFtQkEsVUFBVSxDQUFDLFVBQUQsQ0FIbkIsQ0FJVixRQUFRQSxVQUFVLENBQUMsUUFBRCxDQUpSLENBS1YsVUFBVUEsVUFBVSxDQUFDLGFBQUQsQ0FMVixDQU1WLGVBQWVBLFVBQVUsQ0FBQyxhQUFELENBTmYsQ0FPVixRQUFRQSxVQUFVLENBQUMsTUFBRCxDQVBSLENBUVYsa0JBQWtCQSxVQUFVLENBQUMsV0FBRCxDQVJsQixDQVNWLGtCQUFrQkEsVUFBVSxDQUFDLE9BQUQsQ0FUbEIsQ0FVVixVQUFVQSxVQUFVLENBQUMsTUFBRCxDQVZWLENBV1YsaUJBQWlCQSxVQUFVLENBQUMsUUFBRCxDQVhqQixDQVlWLFNBQVdBLFVBQVUsQ0FBQyxRQUFELENBWlgsQ0FhVixjQUFjQSxVQUFVLENBQUMsV0FBRCxDQWJkLENBY1YscUNBQXFDQSxVQUFVLENBQUMsZ0JBQUQsQ0FkckMsQ0FlVix1QkFBdUJBLFVBQVUsQ0FBQyxlQUFELENBZnZCLENBQUgsQ0FBWCxDQWtCQSxLQUFNRSxDQUFBQSxRQUFRLDBCQUFHLEtBQU1aLENBQUFBLEtBQUssQ0FBQyxDQUN6QmEsTUFBTSxDQUFFLE1BRGlCLENBRXpCQyxHQUFHLENBQUVaLFlBRm9CLENBR3pCYSxJQUFJLENBQUVKLE9BSG1CLENBSXpCSyxPQUFPLENBQUUsQ0FBRSxnQkFBa0IsVUFBU1gsU0FBVSxFQUF2QyxDQUNULGVBQWdCLGtCQURQLENBSmdCLENBQUQsQ0FBZCxDQUFkLENBckJ5Qyx3QkE2QnpDLEdBQUlPLFFBQVEsQ0FBQ0ssTUFBVCxHQUFvQixHQUF4QixDQUE2QixvREFDekJDLFFBQVEsQ0FBRSxHQUFFQyxTQUFVLG9DQUFkLENBQVIsQ0FEeUIsd0JBRXpCLEtBQU0sSUFBSUMsQ0FBQUEsS0FBSixDQUFVLE9BQVYsQ0FBTixDQUNELENBSEgsSUFHUyw0QkFDTCxHQUFJQyxDQUFBQSxTQUFTLDJCQUFHLEVBQUgsQ0FBYixDQUNBLEdBQUlOLENBQUFBLElBQUksMkJBQUlILFFBQVEsQ0FBQ0csSUFBVCxDQUFjLE1BQWQsQ0FBSixDQUFSLENBQ0EsR0FBSU8sQ0FBQUEsWUFBWSwyQkFBRyxDQUFDLFNBQUQsQ0FBWSxjQUFaLENBQUgsQ0FBaEIsQ0FISyx5QkFJTCxJQUFJLEdBQUlDLENBQUFBLEdBQVIsR0FBZVIsQ0FBQUEsSUFBZixDQUFvQiwwQkFDaEIsR0FBRyxDQUFDTyxZQUFZLENBQUNFLFFBQWIsQ0FBc0JELEdBQUcsQ0FBQyxNQUFELENBQXpCLENBQUosQ0FDQSxxREFBQUYsU0FBUyxDQUFDSSxJQUFWLENBQWVGLEdBQWYsRUFBb0IsQ0FEcEIsaUNBRUgsQ0FQSSx5QkFRTCxNQUFPRixDQUFBQSxTQUFQLENBRUgsQ0FDSixDQTNDRCxDLHlCQTRDQUssTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2JuQixxQkFEYSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHhtbDJqcyA9IHJlcXVpcmUoJ3htbDJqcycpO1xyXG5jb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7XHJcblxyXG5jb25zdCB7IFVTRV9NT0NLX0RBVEEsIFdJQ19CQVNFX1VSTCwgV0lDX0NMSUVOVF9JRCwgV0lDX0NMSUVOVF9TRUNSRVQsV0lDX1RPS0VOIH0gPSBwcm9jZXNzLmVudjtcclxuXHJcblxyXG5jb25zdCBnZXRSZXNwb25zZUZyb21XaWNBcGkgPSBhc3luYyAoYm9keSk9PiB7XHJcbiAgICBjb25zdCBkYXRhVG9TZW5kID0gYm9keTtcclxuXHJcbiAgICBsZXQgbk1hcHBlZCA9IHtcclxuICAgICAgICBcInRpcG9fbW9kZWxvXCI6ZGF0YVRvU2VuZFtcIm1vZGVsX3R5cGVcIl0sXHJcbiAgICAgICAgXCJzdGFnaW5nXCI6IGRhdGFUb1NlbmRbXCJzdGFnaW5nXCJdLFxyXG4gICAgICAgIFwiVGlwb19UcmFiYWphZG9yXCI6IGRhdGFUb1NlbmRbXCJqb2JfdHlwZVwiXSxcclxuICAgICAgICBcIk51ZXZvXCI6ZGF0YVRvU2VuZFtcImlzX25ld1wiXSxcclxuICAgICAgICBcIkxpdmlhbm9cIjpkYXRhVG9TZW5kW1wibGlnaHR3ZWlnaHRcIl0sXHJcbiAgICAgICAgXCJOYWNpb25hbGlkYWRcIjpkYXRhVG9TZW5kW1wibmF0aW9uYWxpdHlcIl0sXHJcbiAgICAgICAgXCJQbGF6b1wiOmRhdGFUb1NlbmRbXCJ0ZXJtXCJdLFxyXG4gICAgICAgIFwiUHJlY2lvX1ZlaGljdWxvXCI6ZGF0YVRvU2VuZFtcImNhcl9wcmljZVwiXSxcclxuICAgICAgICBcIlRvdGFsX0ZpbmFuY2lhclwiOmRhdGFUb1NlbmRbXCJ0b3RhbFwiXSxcclxuICAgICAgICBcIkNvbnRhZG9cIjpkYXRhVG9TZW5kW1wiY2FzaFwiXSxcclxuICAgICAgICBcIlRvdGFsX0luZ3Jlc29zXCI6ZGF0YVRvU2VuZFtcImluY29tZVwiXSxcclxuICAgICAgICBcIlJldG9tYVwiOiAgZGF0YVRvU2VuZFtcInJldGFrZVwiXSxcclxuICAgICAgICBcIlZhbG9yX0N1b3RhXCI6ZGF0YVRvU2VuZFtcImZlZV92YWx1ZVwiXSxcclxuICAgICAgICBcIkFuaW9zX1Blcm1hbmVuY2lhX0VtcHBsZW9fQW50ZXJpb3JcIjpkYXRhVG9TZW5kW1wieWVhcnNfbGFzdF9qb2JcIl0sXHJcbiAgICAgICAgXCJGZWNoYV9JbmdyZXNvX0VtcGxlb1wiOmRhdGFUb1NlbmRbXCJkYXRlX2xhc3Rfam9iXCJdXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcyh7XHJcbiAgICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbiAgICAgICAgdXJsOiBXSUNfQkFTRV9VUkwsXHJcbiAgICAgICAgZGF0YTogbk1hcHBlZCxcclxuICAgICAgICBoZWFkZXJzOiB7IFwiQXV0aG9yaXphdGlvblwiOiBgQmVhcmVyICR7V0lDX1RPS0VOfWAsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XHJcbiAgICAgICAgZGVidWdBcHAoYCR7X19kaXJuYW1lfS9XSUM6OmdldFJlc3BvbnNlRnJvbVdpY0FwaTo6RVJST1JgKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VSUk9SJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IG5SZXNwb25zZSA9IFtdO1xyXG4gICAgICAgIGxldCBkYXRhID0gIHJlc3BvbnNlLmRhdGFbJ2RhdGEnXTtcclxuICAgICAgICBsZXQgY29kZURpc2FibGVkID0gW1wiQVVUT0ZJTlwiLCBcIk1VTkRPQ1JFRElUT1wiXTtcclxuICAgICAgICBmb3IodmFyIG9iaiBvZiBkYXRhKXtcclxuICAgICAgICAgICAgaWYoIWNvZGVEaXNhYmxlZC5pbmNsdWRlcyhvYmpbJ0VFRkYnXSkpXHJcbiAgICAgICAgICAgIG5SZXNwb25zZS5wdXNoKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuUmVzcG9uc2U7XHJcblxyXG4gICAgfVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgZ2V0UmVzcG9uc2VGcm9tV2ljQXBpXHJcbn0iXX0=